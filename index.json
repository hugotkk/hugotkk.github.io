[{"content":"https://www.youtube.com/watch?v=j_j2MiAxUvY\u0026amp;list=PL0MZ85B_96CEmmy0C6NF52ZCMNcY1Wryf\nMethods Wait until the transaction is completely settled not practical and safe\nHashlock The transaction is partially complete\nSettle once the sender publishes the key on the blockchain.\nCons  hugo cannot refund if kevin does not response  Timelock  hugo made a partial transaction that the btc can be claimed by kevin within n number of blocks if the transaction is expired, hugo can claim back the fund  Cons  the claims need to execute manually  HTLC (Hash Time Lock Contract) Combine two locks: (and)\n claim within n number of blocks the key is revealed on the blockchain  Steps in a cross chain swap Timestamp: 55:36\nExample: btc -\u0026gt; eth swap from hugo to kevin\nassume that Hugo has a key (secret that only Hugo will know) 1234 with hash 4567\nHugo and Kevin will not make transactions directly\nThey will send the fund to the contract instead\nTHe contract will hold the eth and btc for Hugo and Kevin\nThere are 2 separate contracts\n  one is in btc (let\u0026rsquo;s say Contract A)\n  the other is in eth (let\u0026rsquo;s say Contract B)\n  hugo sent btc to the Contract A in btc network\n  Transaction:\n   Field Value     From hugo   Value 10btc   To kevin   Hash 4567     Kevin sent eth to the Contract B in eth network     Field Value     From kevin   Value 134eth   To hugo   hash 9876     Hugo observed that kevin has funded eth to Contract B. then he will submit his key 1234 in btc network, btc send to kevin by the Contract A same as kevin, he submits his key 9876 in eth network, eth sent to hugo by the Contract B  Problem  semi-trusted  we assume Hugo and Kevin can see each other on each chain if the access right is changed during the transaction\u0026hellip;let say hugo can revoke kevin on eth network..then the transaction fails (this happens on hyperledger as it can have access control but it is not possible on btc and eth)    ","permalink":"https://hugotkk.github.io/posts/cross-chain-swap/","summary":"https://www.youtube.com/watch?v=j_j2MiAxUvY\u0026amp;list=PL0MZ85B_96CEmmy0C6NF52ZCMNcY1Wryf\nMethods Wait until the transaction is completely settled not practical and safe\nHashlock The transaction is partially complete\nSettle once the sender publishes the key on the blockchain.\nCons  hugo cannot refund if kevin does not response  Timelock  hugo made a partial transaction that the btc can be claimed by kevin within n number of blocks if the transaction is expired, hugo can claim back the fund  Cons  the claims need to execute manually  HTLC (Hash Time Lock Contract) Combine two locks: (and)","title":"Atomic cross chain swap between Hyperledger Fabric and Ethereum"},{"content":"Building BLOCKCHAIN Apps With HYPERLEDGER COMPOSER https://www.youtube.com/watch?v=gAxK6zYrfxI\na framework of hyperledger\n testing - mocha / chai webapp generator - Yeoman api generation - Rest Server + loopback api doc generation - swagger auth (rest api) - passport integration with IOT - red-node  ","permalink":"https://hugotkk.github.io/posts/hyperledger-composer/","summary":"Building BLOCKCHAIN Apps With HYPERLEDGER COMPOSER https://www.youtube.com/watch?v=gAxK6zYrfxI\na framework of hyperledger\n testing - mocha / chai webapp generator - Yeoman api generation - Rest Server + loopback api doc generation - swagger auth (rest api) - passport integration with IOT - red-node  ","title":"Hyperledger composer"},{"content":"Official Website\nPlaylist\na visual editor to build workflow and ui application to interact with IOT\n wire the IOTs and user (with web dashboard) read data from IOT write data to IOT (control it, on and off etc) build a flow among IOTs and users for automation build dashboard UI  all can be done by drag and drop\ncan be used with blockchain in supply chain\u0026hellip;\nnode red pull the data from sensors and submit to blockchain automatically\nUse cases temperature monitor dashboard  listen to any data sent from the thermometer show the temperature on the dashboard  Light switcher  send switch on and off signal to the light bulb through dashboard  Automation (like IFFF and Apple Shortcut but in IOT version)  monitoring the environment with sensors (like humidity and temperature) trigger other IOT (like turn on the washing machine)  ","permalink":"https://hugotkk.github.io/posts/node-red/","summary":"Official Website\nPlaylist\na visual editor to build workflow and ui application to interact with IOT\n wire the IOTs and user (with web dashboard) read data from IOT write data to IOT (control it, on and off etc) build a flow among IOTs and users for automation build dashboard UI  all can be done by drag and drop\ncan be used with blockchain in supply chain\u0026hellip;\nnode red pull the data from sensors and submit to blockchain automatically","title":"Node Red"},{"content":"EKS Workshop Day1 Setup  https://www.eksworkshop.com/020_prerequisites/ec2instance https://www.eksworkshop.com/030_eksctl/launcheks https://www.eksworkshop.com/beginner/060_helm/helm_intro/install  Tasks  Deploy simple application Fargate  Notes There are 2 modes in EKS:\n EC2 Fargate  They can coexist in EKS.\nAlso we can only fargate only. When we deploy plugins to the cluster, It will be deployed to the control panel. (hidden from user)\nHow to use fargate in EKS:  create a fargate profile which is associated with a namespace deploy yml to that namespace  Pros and Con of fargate can be scaled up quickly.  it is a micro vm as similar as pod one fargate instance per pod  lower cost of fargate  Fargate will be cheaper in some situations. no need to rent large ec2 instance. it is good if you are doing batch jobs with EKS no need to maintain the ec2 instance (patch it, upgrade the kubelet)  not well integrate with other AWS services like efs?\u0026hellip;need to further study on it.\n","permalink":"https://hugotkk.github.io/posts/aws-workshop/","summary":"EKS Workshop Day1 Setup  https://www.eksworkshop.com/020_prerequisites/ec2instance https://www.eksworkshop.com/030_eksctl/launcheks https://www.eksworkshop.com/beginner/060_helm/helm_intro/install  Tasks  Deploy simple application Fargate  Notes There are 2 modes in EKS:\n EC2 Fargate  They can coexist in EKS.\nAlso we can only fargate only. When we deploy plugins to the cluster, It will be deployed to the control panel. (hidden from user)\nHow to use fargate in EKS:  create a fargate profile which is associated with a namespace deploy yml to that namespace  Pros and Con of fargate can be scaled up quickly.","title":"AWS EKS Workshop"},{"content":"Pros with AWS Managed Blockchain  no need to build the ledger by themself focus on the smart contract a single blockchain network can effectively work cross multiple parties  An Overview on Blockchain Services from AWS https://www.youtube.com/watch?v=WAIOBeQA2QQ\n ledger database (immutable transaction) consenus decentlization smart contract ease for audit  Hyperledger Fabric VS eth  authentication access control private ledger  ","permalink":"https://hugotkk.github.io/posts/aws-managed-blockchain/","summary":"Pros with AWS Managed Blockchain  no need to build the ledger by themself focus on the smart contract a single blockchain network can effectively work cross multiple parties  An Overview on Blockchain Services from AWS https://www.youtube.com/watch?v=WAIOBeQA2QQ\n ledger database (immutable transaction) consenus decentlization smart contract ease for audit  Hyperledger Fabric VS eth  authentication access control private ledger  ","title":"AWS Managed Blockchain"},{"content":"Control Panel Fee  AKS: 0 EKS: fixed charge 0.1 USD / Hour  Integration I think AKS is better, most of the provisioning plugins can be enabled by one click\nIn aws, you need to\n install plugins setup iam service account for the plugins to access AWS service  application routing For AKS,\n it is just an checkbox option  For EKS, you need to\n setup IAM OICD setup external dns setup ALB contrller  auto scaler Same as application routing -\u0026gt; auto scaler. enable and use\nin AWS, we need to setup cluster autoscaler\nvolume provisioning AKS supports volume provisioning with Azure File (EFS) \u0026amp; Azure Disk (EBS), it has many pre-defined volume class\u0026hellip;we do not need to install any plugin\nFor EKS, we need CSI driver\n ebs efs  Virtual node It is AKS things, like EKS\u0026rsquo;s fargate\u0026hellip;but I cannot find the price..\n","permalink":"https://hugotkk.github.io/posts/eks-vs-aks/","summary":"Control Panel Fee  AKS: 0 EKS: fixed charge 0.1 USD / Hour  Integration I think AKS is better, most of the provisioning plugins can be enabled by one click\nIn aws, you need to\n install plugins setup iam service account for the plugins to access AWS service  application routing For AKS,\n it is just an checkbox option  For EKS, you need to\n setup IAM OICD setup external dns setup ALB contrller  auto scaler Same as application routing -\u0026gt; auto scaler.","title":"EKS vs AKS"},{"content":"Installation https://hyperledger-fabric.readthedocs.io/en/release-2.2/install.html node go docker fabric fabric-ca third party image: kafka, zookeeper, couchdb fabric-ca-binary\n","permalink":"https://hugotkk.github.io/posts/hyperfabric-ledger/","summary":"Installation https://hyperledger-fabric.readthedocs.io/en/release-2.2/install.html node go docker fabric fabric-ca third party image: kafka, zookeeper, couchdb fabric-ca-binary","title":"Hyperledger fabric"},{"content":"https://youtu.be/TgsTCzLRQcs?t=1905\nMay You Stay Forever Young Taipei golden horse film festival 2021\nTrailer\n two girls arrested in 721 one sexuel abused by HK police force and try to commit suicide another young teanager insists on looking for her. She is arrested as she turns back to him in a confrontation with riot police  Revolution of Our Times IMDB\nTrailer\nConnection with mashipo How an elderly Hong Kong pro-democracy protester also fought in vain to save his village from developers\n Wong understands people because he has confronted the government before in Mashipo young people help them to protect his home in mashipo\u0026hellip;so he thinks he has responsibility to protect them back  The FA , who praises the police force, let him enter the Prince Edward station at 831  still a high school student have dramatic changes after 831 (become negative\u0026hellip;) interview with his teacher and classmate  Protector stayed in Legislative Council  a girl who said 齊上齊落(all together not one less), turn back bring people out from the council ppl should participate more\u0026hellip;not just support them\u0026hellip; HK is not important; HKER is more important TW use 40 years to have democracy - need patient Repressed anger as it does not help  Interview with people who is already in prison or left HK  Ho Kwai-lam  Aerial photography - protest confront with riot police at MongKok  what is “be water”  Drifting Petals Taipei golden horse film festival 2021\nTrailer\n","permalink":"https://hugotkk.github.io/posts/movies-about-hk/","summary":"https://youtu.be/TgsTCzLRQcs?t=1905\nMay You Stay Forever Young Taipei golden horse film festival 2021\nTrailer\n two girls arrested in 721 one sexuel abused by HK police force and try to commit suicide another young teanager insists on looking for her. She is arrested as she turns back to him in a confrontation with riot police  Revolution of Our Times IMDB\nTrailer\nConnection with mashipo How an elderly Hong Kong pro-democracy protester also fought in vain to save his village from developers","title":"Movies about Hong Kong"},{"content":"VPC Addressing Reversed IPs in subnet https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html\nDefault route table will have rule: \u0026lt;vpc_cidr\u0026gt; local Limited ips per ENI Single ENI can have multiple private ip. Depends on the instance types.\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html\nVPC Route tables by default the subnet will use vpc route table\nwe can customize the route table per subnet\nVPC Firewall EC2 -\u0026gt; Security Group -\u0026gt; NACL\nSecurity Group is stateful\nDC need to know about BGP first\n","permalink":"https://hugotkk.github.io/posts/aws-certified-advanced-network/","summary":"VPC Addressing Reversed IPs in subnet https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html\nDefault route table will have rule: \u0026lt;vpc_cidr\u0026gt; local Limited ips per ENI Single ENI can have multiple private ip. Depends on the instance types.\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html\nVPC Route tables by default the subnet will use vpc route table\nwe can customize the route table per subnet\nVPC Firewall EC2 -\u0026gt; Security Group -\u0026gt; NACL\nSecurity Group is stateful\nDC need to know about BGP first","title":"AWS Certified Advanced Networking - Specialty"},{"content":"Trust Over IP: Hyperledger Ursa, Indy, and Aires https://www.youtube.com/watch?v=FfuhlF9ZYPM\nNotes  prove the credential without CA trusted issuer (eg: gov) issues the identity token (eg: driving license) -\u0026gt; send it to a crypto account (like sending btc to someone) on the blockchain, it shows a record that the account owns that license. (like you can check your btc balance / NFS on chain explorer) anyone can request that you own that account (like an approval transaction from dapp). You can decide to share your data to what extent send the data to requester and it can be verified as it is signed by issuer blockchain is used to prove the ownership of your identities data can be stored off chain, sign it and verify with issuer\u0026rsquo;s account hacking personal accounts become useless -\u0026gt; not cost effective, you can hack a single person each time stealing / leading personal data is useless -\u0026gt; no proof, no one will accept  Example british columbia\nComprehensive review of 21 use cases of Hyperledger https://youtu.be/VQTARQSuUFU?t=1440\nUse cases (some are still in proof of concept)  end to end tracking (supply chain, different parties can participate eg: bank insurance company consultant retail\u0026hellip;) 2.identity management - eg: allow 3rd parties to access your data with requests, prevent fraud, credit checking, hash your passport/fingerprint so you can verify it is your identity contract automation- like promotion in company (HR), consultant contract voting tokenisations - cross parties reward program(asiamiles), assets management (use in trading, convert different kinds of assets like house stock cash to token) immutable record- law enforcement investigation, accounting, credit check, insurance claim, medical history, law\u0026hellip;  Hyperledger Fabric Business Use Cases https://youtu.be/1ps4PJtFRfY?t=544\nIBM food trust  safety sustainability cost optimization (inventory / transportation ) tracking  Tradelens -\u0026gt; (supply chain for trading)  costs 1.8T / year -\u0026gt; potential saving ~10% costs  IBM blockchain world wire  world wire solution with blockchain use stellar protocol  Singapore Exchange: Clearing Financial Transactions on Amazon Managed Blockchain https://www.youtube.com/watch?v=nUre2ELySdo\nblockchain is used to handle the payment and settlement of securities\nthe method they used called DVP (delivery versus payment) = a way to ensure cash and securities can simultancely exchange\nclient can be\n buyer = buy securities with eth seller = sell securities with eth  In the architecture,\n hyperledger = securities eth client = cash  transaction will came cross with both ledgers\narbitrator and obersver with receive activties on chain\n arbitrator = mediator = handle dispute observer = regulator = do regulatory report  Pros with AWS Managed Blockchain  no need to build the ledger by themself focus on the smart contract a single blockchain network can effectively work cross multiple parties  An Overview on Blockchain Services from AWS https://www.youtube.com/watch?v=WAIOBeQA2QQ\nPros of blockchain network  ledger database (immutable transaction) consenus decentlization smart contract ease for audit  Hyperledger fabric VS ETH  authentication access control easy to add user easy to duel with settlement (bank) faster than centialization private ledger  use case  trading supply case  ","permalink":"https://hugotkk.github.io/posts/blockchain-use-case/","summary":"Trust Over IP: Hyperledger Ursa, Indy, and Aires https://www.youtube.com/watch?v=FfuhlF9ZYPM\nNotes  prove the credential without CA trusted issuer (eg: gov) issues the identity token (eg: driving license) -\u0026gt; send it to a crypto account (like sending btc to someone) on the blockchain, it shows a record that the account owns that license. (like you can check your btc balance / NFS on chain explorer) anyone can request that you own that account (like an approval transaction from dapp).","title":"Blockchain use cases"},{"content":"with IAM  user -\u0026gt; with API_KEY \u0026amp; API_TOKEN audience attached iam role (eg: ec2 instance) update the iam role and user mapping in configmap aws-auth  OIDC OIDC built in at the eks cluster\n OICD can request AWS IAM to issue the web identity token the token will be used to assume role and access AWS service     Item Value     OICD oidc.hhuge9.com   IAM user hugotse   OIDC user kevintse   IAM role S3Admin    To assume a role in EKS  Associate OIDC to AWS IAM - that why it is called associate-iam-oidc-provider. Create an role which has a trust relationshop to the service account from OIDC to assume with Web Identity Token - so who in OIDC can use web identity token to access aws service  Difference between assume-role and assume-role-with-web-identity  hugotse can use aws sts assume-role to assume S3Admin kevintse can use aws sts assume-role-with-web-identity with web-identity to assume S3Admin  How a pod to access aws service EKS has some webhooks, it will monitor our changes on cluster\nYou can create a custom admission webhooks, deny / modify specfic requests of api servers\nWhen the admission webhook detects a service account associated to a pod and that account annotate with iam arn, it will\n admission webhook -\u0026gt; send OICD token to AWS IAM AWS IAM -\u0026gt; verify the OICD token and return web identity token to the webhook admission webhook save the web identity token and mount it as a volume in the pod Application -\u0026gt; use the web identity token with aws sts assume-role-with-web-identity to access AWS Service  Where does the OICD token come from? with Service Account Token Volume Projection, any pod attached with a service account will automatically mount with a OICD token\nWays to assume role  if you are an iam user, use access key if you are in aws services (like ec2 instance), attach iam role or with oidc, use web identity token  oidc user get web identity token from aws iam with oidc token oidc user use the token to assume role    Permission needs to assume role by a iam user  user hugotse have right to use assume-role (call aws sts assume-role) a role has a trusted relationship to user hugotse to assume role  by a oicd user  oidc user kevintse have right to use assume-role-with-web-identity a role has a trusted relationship with oicd user kevintse to assume role with web identity  ","permalink":"https://hugotkk.github.io/posts/k8s-authentication/","summary":"with IAM  user -\u0026gt; with API_KEY \u0026amp; API_TOKEN audience attached iam role (eg: ec2 instance) update the iam role and user mapping in configmap aws-auth  OIDC OIDC built in at the eks cluster\n OICD can request AWS IAM to issue the web identity token the token will be used to assume role and access AWS service     Item Value     OICD oidc.","title":"k8s Authentication"},{"content":"Things to turn off before exam Bandwidth saving  google drive sync any backgorund updates wifi connection in other devices  Prevent from autoupdate  software update (mbp, iphone)  Others  firewall disable all chrome plugins  backup plan  sim card - two extra network: EE, giffgaff spare computer (MBP)  Tips When use wc -\u0026gt; be careful the header, need total - 1 Store temporary commands / note / result in a fixed location like /root/tmp Even in remote host; we use that fixed location to store our results then get back the result from it remote$ cat tmp remote$ exit remote$ exit local$ ssh remote cat tmp Do not use tmux hard to copy and paste and scroll\nOne question one yml Name with q\u0026lt;no\u0026gt;.yml like q10.yml is the yml of 10th question\nWrite all resources on same yml in same question Set .vimrc set sw=2 ts=2 et set hidden Use alias export do='--dry-run=client -o yaml' export now='--sort-by=\u0026quot;{.metadata.creationTimestamp}\u0026quot;' Use variable in command n=namespace nn=name i=image s=server Then you will find that we can reuse many command history. like\nCreate po yml k run -n $n $nn --image $i $do Get po k get po $nn -n $n Test service account k auth can-i --as=system:serviceaccount:$n:$nn When working on next question, start a new vim (kill the old session) Keep a single vim session in bash  back and fore from vim and bash many times is needed using multiple vim session are so confusing that also why working on single yaml per question is encouraged  Create (touch /opt/xxxxx/q11/answer) the answer file first  needed to submit anser to specfic file just touch the file -\u0026gt; open it with vim -\u0026gt; put it in background (c-z)  ","permalink":"https://hugotkk.github.io/posts/note-for-cka-exam/","summary":"Things to turn off before exam Bandwidth saving  google drive sync any backgorund updates wifi connection in other devices  Prevent from autoupdate  software update (mbp, iphone)  Others  firewall disable all chrome plugins  backup plan  sim card - two extra network: EE, giffgaff spare computer (MBP)  Tips When use wc -\u0026gt; be careful the header, need total - 1 Store temporary commands / note / result in a fixed location like /root/tmp Even in remote host; we use that fixed location to store our results then get back the result from it remote$ cat tmp remote$ exit remote$ exit local$ ssh remote cat tmp Do not use tmux hard to copy and paste and scroll","title":"Note for CKA Exam"},{"content":"   Control Panel     svr1   svr2   svr3    svr1 Stop k8s systemctl stop kubelet crictl rm -f $(crictl ps -q) start the etcd in single node vim /etc/kubernetes/manifests/etcd.yaml - --force-new-cluster=true Add svr2 etcd to cluster kubectl exec -it etcd-svr1.hhuge9.com -nkube-system -- sh -c 'ETCDCTL_API=3 etcdctl --endpoints 127.0.0.1:2379 --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key --cacert=/etc/kubernetes/pki/etcd/ca.crt member add svr2.hhuge9.com --peer-urls=\u0026quot;https://192.168.0.102:2380\u0026quot;' Save the output export ETCD_NAME=\u0026quot;svr2.hhuge9.com\u0026quot; export ETCD_INITIAL_CLUSTER=\u0026quot;svr1.hhuge9.com=http://192.168.0.101:2380,svr2.hhuge9.com=http://192.168.0.102:2380\u0026quot; export ETCD_INITIAL_CLUSTER_STATE=existing systemctl start kubelet svr2 Stop k8s and remove etcd data systemctl stop kubelet crictl rm -f $(crictl ps -q) rm -rf /var/lib/etcd Update etcd config (with the output in svr1) vim /etc/kubernetes/manifests/etcd.yaml - --initial-cluster=svr1.hhuge9.com=https://192.168.0.101:2380,svr2.hhuge9.com=https://192.168.0.102:2380 - --initial-cluster-state=existing systemctl start kubelet ","permalink":"https://hugotkk.github.io/posts/etcd/","summary":"Control Panel     svr1   svr2   svr3    svr1 Stop k8s systemctl stop kubelet crictl rm -f $(crictl ps -q) start the etcd in single node vim /etc/kubernetes/manifests/etcd.yaml - --force-new-cluster=true Add svr2 etcd to cluster kubectl exec -it etcd-svr1.hhuge9.com -nkube-system -- sh -c 'ETCDCTL_API=3 etcdctl --endpoints 127.0.0.1:2379 --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key --cacert=/etc/kubernetes/pki/etcd/ca.crt member add svr2.hhuge9.com --peer-urls=\u0026quot;https://192.168.0.102:2380\u0026quot;' Save the output export ETCD_NAME=\u0026quot;svr2.hhuge9.com\u0026quot; export ETCD_INITIAL_CLUSTER=\u0026quot;svr1.","title":"Recover etcd"},{"content":"Procedures  create private key create csr (distinguished_name) sign csr by CA (x509v3)  Commands Gen private key openssl genrsa \\ -out ca.key Self signed crt openssl req -x509 \\ -config openssl.cnf -new \\ -out ca.crt \\ -key ca.key gen csr openssl req \\ -config openssl.cnf -new \\ -out server.csr \\ -key server.key sign crt openssl x509 \\ -extfile openssl.cnf \\ -extensions svr_cert \\ -in server.csr \\ -out server.crt \\ -CA ca.crt \\ -CAkey ca.key \\ -CAcreateserial  When the CA is first time to sign a cert, you need to create serial file ca.crl with -CAcreateserial Next time we sign a new cert, we will need to update the serial file with -CAserial ca.crl  Outputs Inspect the cert / key openssl rsa -in ca.key -noout -text openssl x509 -in ca.crt -noout -text extract the pub key openssl rsa -in ca.key -pubout openssl x509 -in ca.crt -noout -pubkey Verify crt is issue by ca openssl verify -CAfile ca.crt server.crt key and crt are match (modulus) openssl rsa -in ca.key -nout -modulus | openssl md5 openssl x509 -in ca.crt -nout -modulus | openssl md5 trust self signned ca we need to place the ca.crt to a location and call command below to trusted the cert (the programme will create a soft link)\nwe can man update-ca-certificate to find the location. eg: /usr/local/share/ca-certificates\ncp ca.crt /usr/local/share/ca-certificates update-ca-certificate trusted the cert in firefox and chrome acutally work but we need to restart the pc..\ntwo output should be same\nCAxxxx \u0026lt;- Capital in CA, lowercase in next word -in -out \u0026lt;- represent the module\nConfig cp /etc/ssl/openssl.cnf openssl.cnf vi openssl.cnf Remove all empty and commended lines and start update the openssl.cnf\nHOME = . oid_section = new_oids [ new_oids ] tsa_policy1 = 1.2.3.4.1 tsa_policy2 = 1.2.3.4.5.6 tsa_policy3 = 1.2.3.4.5.7 [ ca ] [ CA_default ] policy = policy_match [ policy_match ] countryName = match stateOrProvinceName = match organizationName = match organizationalUnitName = optional commonName = supplied emailAddress = optional [ policy_anything ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = optional organizationalUnitName = optional commonName = supplied emailAddress = optional [ req ] default_bits = 2048 default_keyfile = privkey.pem distinguished_name = req_distinguished_name attributes = req_attributes string_mask = utf8only [ req_distinguished_name ] 0.organizationName = Organization Name (eg, company) 0.organizationName_default = hhuge9.com commonName = Common Name (e.g. server FQDN or YOUR name) commonName_max = 64 [ req_attributes ] [ v3_req ] basicConstraints = CA:FALSE keyUsage = critical, digitalSignature, keyEncipherment [ v3_ca ] basicConstraints = critical,CA:true keyUsage = critical, keyCertSign subjectKeyIdentifier=hash authorityKeyIdentifier=keyid:always,issuer [ svr_cert ] basicConstraints=CA:FALSE keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = serverAuth subjectKeyIdentifier=hash authorityKeyIdentifier=keyid,issuer [ usr_cert ] basicConstraints=CA:FALSE keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = clientAuth subjectKeyIdentifier=hash authorityKeyIdentifier=keyid,issuer The most important setting is session: v3_req v3_ca svr_cert and usr_cert\nNormally, Cert need req_distinguished_name session only.\nFor example, we use domain in CN (Common Name) in web server cert\nIn k8s, we will use CN as username, O (Orgnazation) as group for auth\nIt can be done by commands without config.\nThose information is defined in req stage. (not sign stage)\nIf you want to use config, you can:\n[ req_distinguished_name ] 0.organizationName = Organization Name (eg, company) 0.organizationName_default = hhuge9.com commonName = Common Name (e.g. server FQDN or YOUR name) commonName_max = 64 Or in command, we can\nopenssl req \\ -config openssl.cnf -new \\ -out server.csr \\ -key server.key \\ -subj '/O=hhuge9.com/CN=redis.hhuge9.com' But when we want to create a CA, cert for TLS auth. We need x503v3 extension to define additional information.\nThat is why we see -config and -extensions in sign command.\nTo check the documentation of the extension, we can man openssl x509 \u0026gt; go to bottom \u0026gt; Also see x509v3_config \u0026gt; man x509v3_config\nCSR do not need the extension. -config is optional.\nThis three are most important:\nFor non CA\nbasicConstraints = CA:FALSE keyUsage = critical, digitalSignature, keyEncipherment For CA\nbasicConstraints = CA:TRUE keyUsage = critical, keyCertSign For server cert\nextendedKeyUsage = serverAuth For client cert\nextendedKeyUsage = clientAuth If we want to contraint the cert be used by specfic host, we can add subjectAltName\nsubjectAltName = @alt_name [ alt_name ] DNS.0 = redis-master.hhuge9.com DNS.1 = redis01.hhuge9.com IP.0 = 192.168.2.100 ","permalink":"https://hugotkk.github.io/posts/openssl/","summary":"Procedures  create private key create csr (distinguished_name) sign csr by CA (x509v3)  Commands Gen private key openssl genrsa \\ -out ca.key Self signed crt openssl req -x509 \\ -config openssl.cnf -new \\ -out ca.crt \\ -key ca.key gen csr openssl req \\ -config openssl.cnf -new \\ -out server.csr \\ -key server.key sign crt openssl x509 \\ -extfile openssl.cnf \\ -extensions svr_cert \\ -in server.csr \\ -out server.crt \\ -CA ca.","title":"How to create ssl cert for tls auth"},{"content":"I am preparing the CKA exam. The exam requires us to complete tasks using web terminal on Chrome.\nMy concern is that Ctrl+w is a common shortcut in terminal (delete word) but it also is the \u0026ldquo;close tab\u0026rdquo; shortcut of chrome. (Windows)\nThere is a workaround on this issue. Comment under this article mentioned that we can define ctrl+w in chrome://extensions/shortcuts to override the default behavior on ctrl+w. This will prevent the tab be closed when hit ctrl+w accidently.\n","permalink":"https://hugotkk.github.io/posts/disable-ctrl-w-on-chrome/","summary":"I am preparing the CKA exam. The exam requires us to complete tasks using web terminal on Chrome.\nMy concern is that Ctrl+w is a common shortcut in terminal (delete word) but it also is the \u0026ldquo;close tab\u0026rdquo; shortcut of chrome. (Windows)\nThere is a workaround on this issue. Comment under this article mentioned that we can define ctrl+w in chrome://extensions/shortcuts to override the default behavior on ctrl+w. This will prevent the tab be closed when hit ctrl+w accidently.","title":"Disable Ctrl+w on Chrome"},{"content":"https://www.w3.org/TR/NOTE-datetime\n2019-07-16T12:00:00Z = utc time\nYYYY-MM-DDThh:mm:ss.sTZD\nTZD can be Z or +hh:mm or -hh:mm\nZ = UTC\n+08:00 = UTC+8\n","permalink":"https://hugotkk.github.io/posts/time-format/","summary":"https://www.w3.org/TR/NOTE-datetime\n2019-07-16T12:00:00Z = utc time\nYYYY-MM-DDThh:mm:ss.sTZD\nTZD can be Z or +hh:mm or -hh:mm\nZ = UTC\n+08:00 = UTC+8","title":"Time Format"},{"content":"Facing this warning in a repo\nwarning: ignoring broken ref refs/remotes/origin/HEAD https://stackoverflow.com/questions/45811971/warning-ignoring-broken-ref-refs-remotes-origin-head\nAfter reading this article, seem the reference of refs/remotes/origin/HEAD is broken.\n$ git symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/master I have changed the branch from master to main before. master branch is no longer exist. I think that is the reason of the warning.\ngit symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/main Then the warning is fixed.\n","permalink":"https://hugotkk.github.io/posts/broken-git-ref/","summary":"Facing this warning in a repo\nwarning: ignoring broken ref refs/remotes/origin/HEAD https://stackoverflow.com/questions/45811971/warning-ignoring-broken-ref-refs-remotes-origin-head\nAfter reading this article, seem the reference of refs/remotes/origin/HEAD is broken.\n$ git symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/master I have changed the branch from master to main before. master branch is no longer exist. I think that is the reason of the warning.\ngit symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/main Then the warning is fixed.","title":"Broken Git Ref"},{"content":"Recently find that it is too slow to start a new bash.\nAfter debugging, I realize that nvm is the main reason for that.\nFinally, disabled nvm to solve the problem.\n","permalink":"https://hugotkk.github.io/posts/slow-bash-startup/","summary":"Recently find that it is too slow to start a new bash.\nAfter debugging, I realize that nvm is the main reason for that.\nFinally, disabled nvm to solve the problem.","title":"Slow Bash Startup"},{"content":"I used the emacs keybind to maniplicate the string on command line but it does not work at chrome on macos.\nI am unhappy with that until I find the solution on this post\n https://stackoverflow.com/questions/20146972/is-there-a-way-to-make-alt-f-and-alt-b-jump-word-forward-and-backward-instead-of  sudo mkdir -p ~/Library/Keybindings/ sudo vi ~/Library/Keybindings/DefaultKeyBinding.dict { \u0026quot;~d\u0026quot; = \u0026quot;deleteWordForward:\u0026quot;; \u0026quot;^w\u0026quot; = \u0026quot;deleteWordBackward:\u0026quot;; \u0026quot;~f\u0026quot; = \u0026quot;moveWordForward:\u0026quot;; \u0026quot;~b\u0026quot; = \u0026quot;moveWordBackward:\u0026quot;; } ","permalink":"https://hugotkk.github.io/posts/move-forward-backward-in-chrome/","summary":"I used the emacs keybind to maniplicate the string on command line but it does not work at chrome on macos.\nI am unhappy with that until I find the solution on this post\n https://stackoverflow.com/questions/20146972/is-there-a-way-to-make-alt-f-and-alt-b-jump-word-forward-and-backward-instead-of  sudo mkdir -p ~/Library/Keybindings/ sudo vi ~/Library/Keybindings/DefaultKeyBinding.dict { \u0026quot;~d\u0026quot; = \u0026quot;deleteWordForward:\u0026quot;; \u0026quot;^w\u0026quot; = \u0026quot;deleteWordBackward:\u0026quot;; \u0026quot;~f\u0026quot; = \u0026quot;moveWordForward:\u0026quot;; \u0026quot;~b\u0026quot; = \u0026quot;moveWordBackward:\u0026quot;; } ","title":"Move Forward Backward in Chrome"}]