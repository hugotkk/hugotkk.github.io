<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Multicast &#183; Hugo's IT journal</title><meta name=title content="Multicast &#183; Hugo's IT journal"><meta name=description content="Explore an IT enthusiast's personal journal sharing insights on DevOps, AWS, Kubernetes, Docker, and more - learn, grow, and stay updated in the tech world."><meta name=keywords content="ccie,notes,"><link rel=canonical href=https://hugotkk.github.com/posts/multicast/><link type=text/css rel=stylesheet href=/css/main.bundle.min.85f006de1806b55b2d082d1122deedd8cec6fdc1f7c8a51be975a4496165d6c798f4a3de52545a6a87cc4bc09fc2d6f5201d44ea57acc1ac2b1c42a688c62bee.css integrity="sha512-hfAG3hgGtVstCC0RIt7t2M7G/cH3yKUb6XWkSWFl1seY9KPeUlRaaofMS8Cfwtb1IB1E6leswawrHEKmiMYr7g=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.b8f12e2e21d0fce82f8d935f9cb80321fa3fca124fa36cc4df6e4b7474223741a777eb2b65f810cc333bd862f49543df61cf5607a0736faf053ffe9b9c39ff8a.js integrity="sha512-uPEuLiHQ/OgvjZNfnLgDIfo/yhJPo2zE325LdHQiN0Gnd+srZfgQzDM72GL0lUPfYc9WB6Bzb68FP/6bnDn/ig==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Multicast"><meta property="og:description" content="PIM Setup # Router Configuration:
Enable multicast functionality on the router:
ip multicast-routing Enable PIM on interfaces that will handle multicast traffic. You can choose between sparse mode and dense mode."><meta property="og:type" content="article"><meta property="og:url" content="https://hugotkk.github.com/posts/multicast/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-02T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-03T00:22:03+01:00"><meta property="og:site_name" content="Hugo's IT journal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Multicast"><meta name=twitter:description content="PIM Setup # Router Configuration:
Enable multicast functionality on the router:
ip multicast-routing Enable PIM on interfaces that will handle multicast traffic. You can choose between sparse mode and dense mode."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Multicast","headline":"Multicast","abstract":"PIM Setup # Router Configuration:\nEnable multicast functionality on the router:\nip multicast-routing Enable PIM on interfaces that will handle multicast traffic. You can choose between sparse mode and dense mode.","inLanguage":"en","url":"https:\/\/hugotkk.github.com\/posts\/multicast\/","author":{"@type":"Person","name":"Hugo"},"copyrightYear":"2024","dateCreated":"2024-09-02T00:00:00\u002b00:00","datePublished":"2024-09-02T00:00:00\u002b00:00","dateModified":"2024-09-03T00:22:03\u002b01:00","keywords":["ccie","notes"],"mainEntityOfPage":"true","wordCount":"1280"}]</script><meta name=author content="Hugo"><link href=https://github.com/hugotkk rel=me><link href=https://linkedin.com/in/hugotkk rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V270QWW7TE"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V270QWW7TE")</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Hugo&rsquo;s IT journal</span>
<img src=/image.jpg width=230 height=230 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Hugo's IT journal"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Hugo&rsquo;s IT journal</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Posts>Posts</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Tags>Tags</p></a><a href=/tags/k8s/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=k8s>Kubernetes</p></a><a href=/tags/openstack/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=openstack>OpenStack</p></a><a href=/tags/aws/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=aws>AWS</p></a><a href=/tags/azure/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=azure>Azure</p></a><a href=/tags/rancher/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=rancher>Rancher</p></a><a href=/tags/docker/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=docker>Docker</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Posts>Posts</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Tags>Tags</p></a></li><li class=mt-1><a href=/tags/k8s/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=k8s>Kubernetes</p></a></li><li class=mt-1><a href=/tags/openstack/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=openstack>OpenStack</p></a></li><li class=mt-1><a href=/tags/aws/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=aws>AWS</p></a></li><li class=mt-1><a href=/tags/azure/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=azure>Azure</p></a></li><li class=mt-1><a href=/tags/rancher/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=rancher>Rancher</p></a></li><li class=mt-1><a href=/tags/docker/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=docker>Docker</p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Multicast</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2024-09-02 00:00:00 +0000 UTC">2 September 2024</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2024-09-03 00:22:03 +0100 +0100">Updated: 3 September 2024</time></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/ccie/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">ccie</span></span></span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/notes/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">notes</span></span></span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=Hugo src=/image_hu41af6bbe385ae76f287135953fab8786_14628_192x192_fill_q75_box_smart1.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Hugo</div><div class="text-sm text-neutral-700 dark:text-neutral-400">DevOps Engineer based in London</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/hugotkk target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/hugotkk target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#pim-setup>PIM Setup</a></li><li><a href=#pim-dm-dense-mode>PIM-DM (Dense Mode)</a></li><li><a href=#pim-sm-sparse-mode>PIM-SM (Sparse Mode)</a><ul><li><a href=#reverse-path-forwarding-rpf>Reverse Path Forwarding (RPF)</a></li><li><a href=#static-rp>Static RP</a></li><li><a href=#dynamic-rp>Dynamic RP</a><ul><li><a href=#auto-rp>Auto-RP</a></li><li><a href=#bsr>BSR</a></li></ul></li></ul></li><li><a href=#bidir-pim>BIDIR-PIM</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#pim-setup>PIM Setup</a></li><li><a href=#pim-dm-dense-mode>PIM-DM (Dense Mode)</a></li><li><a href=#pim-sm-sparse-mode>PIM-SM (Sparse Mode)</a><ul><li><a href=#reverse-path-forwarding-rpf>Reverse Path Forwarding (RPF)</a></li><li><a href=#static-rp>Static RP</a></li><li><a href=#dynamic-rp>Dynamic RP</a><ul><li><a href=#auto-rp>Auto-RP</a></li><li><a href=#bsr>BSR</a></li></ul></li></ul></li><li><a href=#bidir-pim>BIDIR-PIM</a></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">PIM Setup<div id=pim-setup class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pim-setup aria-label=Anchor>#</a></span></h2><p>Router Configuration:</p><p>Enable multicast functionality on the router:</p><pre tabindex=0><code>ip multicast-routing
</code></pre><p>Enable PIM on interfaces that will handle multicast traffic. You can choose between sparse mode and dense mode.</p><pre tabindex=0><code>interface GigabitEthernet0/0
ip pim dense-mode
</code></pre><p>or</p><pre tabindex=0><code>interface GigabitEthernet0/0
ip pim sparse-mode
</code></pre><p>Set IGMP Version (if needed):
IGMP version 3 is required for Source-Specific Multicast (SSM).</p><pre tabindex=0><code>interface GigabitEthernet0/0
ip igmp version 3
</code></pre><p>End Device Configuration:</p><p>For devices that want to receive multicast traffic:</p><p>Join a Multicast Group:</p><pre tabindex=0><code>interface GigabitEthernet0/0
ip igmp join-group 239.1.1.1
</code></pre><p>Set IGMP Version:
Ensure the IGMP version matches the network configuration.</p><pre tabindex=0><code>interface GigabitEthernet0/0
ip igmp version 3
</code></pre><p>Switch Configuration:</p><p>Enable IGMP snooping on the switch to optimize multicast traffic:</p><pre tabindex=0><code>interface Ethernet0/0
ip igmp snooping
</code></pre><h2 class="relative group">PIM-DM (Dense Mode)<div id=pim-dm-dense-mode class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pim-dm-dense-mode aria-label=Anchor>#</a></span></h2><p>PIM-DM operates on the assumption that almost every subnet in the network has at least one receiver interested in the multicast traffic. This &ldquo;dense&rdquo; assumption leads to its flood-and-prune behavior.</p><p>Initial Flooding:</p><ol><li>When a source starts sending multicast traffic, routers flood this traffic to all PIM-enabled interfaces.</li><li>This flooding occurs regardless of whether there are interested receivers or not.</li></ol><p>Pruning :</p><ol><li>If a router has no interested receivers (determined by IGMP), it sends a PIM Prune message upstream.</li><li>This Prune message tells the upstream router to stop forwarding multicast traffic for that group on that interface.</li><li>The pruned state is temporary and will time out, allowing the process to restart.</li></ol><p>State Refresh:</p><ol><li>PIM-DM uses State Refresh messages to maintain the pruned state without requiring the flood-and-prune cycle to repeat frequently.</li><li>The router closest to the source sends these messages periodically (typically every 60 seconds).</li><li>When a downstream router receives a State Refresh message:</li></ol><ul><li>If its state matches the prune flag in the message, it refreshes its prune timer.</li><li>If its state doesn&rsquo;t match (e.g., it now has interested receivers), it may send a Graft message to rejoin the distribution tree.</li></ul><p>Example:</p><ol><li>PC1 pings 239.1.1.1 (acting as a multicast source).</li><li>PC2 and PC3 have joined the 239.1.1.1 group.</li><li>Initially, all PIM-DM enabled routers flood this traffic.</li><li>Routers without interested receivers (those not on paths to PC2 or PC3) send Prune messages upstream.</li><li>Periodically, State Refresh messages are sent to maintain the pruned state without full reflooding.</li></ol><h2 class="relative group">PIM-SM (Sparse Mode)<div id=pim-sm-sparse-mode class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pim-sm-sparse-mode aria-label=Anchor>#</a></span></h2><p>In Sparse Mode, multicast traffic is not flooded throughout the network. Instead, it uses a more efficient approach, leveraging the Rendezvous Point (RP) as a central meeting point for multicast sources and receivers.</p><p>There are few way to setup RP:</p><ol><li>Static RP: Manually configure a fixed RP.</li><li>Auto-RP: Automatically select RP candidates using mapping agent.</li><li>BSR (Bootstrap Router): Dynamically select RP candidates using BSR.</li></ol><p>The multicast traffic will flow:</p><ul><li>End devices interested in a multicast group send a PIM (*,G) Join message to the RP. This sets up the shared tree with the RP as the root.</li><li>From Source to RP: Multicast traffic is encapsulated into unicast packets and sent directly to the RP using PIM Register messages. The RP decapsulates the traffic and forwards it to the downstream receivers.</li><li>From RP to Destination: Multicast traffic flows from the RP to the destination using the shared tree.</li><li>To improve efficiency, the RP or the last-hop router may send a PIM (S,G) Join message to the source to build a source-specific tree. This tree uses the source as the root and avoids involving the RP.</li><li>The RP may send a Register-Stop message to the source, instructing it to send multicast traffic directly instead of encapsulating it into unicast.</li></ul><p>These PIM Join Messages will build unidirectional trees:</p><ul><li>Shared Tree: Multicast traffic flows downstream from the RP to the destination.</li><li>Source-Specific Tree: Traffic flows directly between the source and the destination, bypassing the RP.</li></ul><h3 class="relative group">Reverse Path Forwarding (RPF)<div id=reverse-path-forwarding-rpf class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#reverse-path-forwarding-rpf aria-label=Anchor>#</a></span></h3><p>To ensures that multicast traffic follows the best path back to the source.</p><p>Each hop in the shared tree performs an RPF check to verify that the traffic is coming from the correct interface.</p><p>RPF is also a crucial mechanism in multicast routing for preventing loops.</p><p>For example, in a shared tree, PIM-Join messages are sent from the destination (receiver) towards the RP.</p><p>At each hop, the router checks its unicast routing table for the best path to the RP and forwards the message on that interface.</p><p>Loop Prevention:</p><ul><li>The RPF check ensures that multicast traffic is only forwarded if it arrives on the expected incoming interface.</li></ul><p>For Example:</p><p>Consider a network where Router A is connected to both B and C, forming a potential loop:</p><pre tabindex=0><code>A &lt;-&gt; B
   |
   v
   C
</code></pre><p>If multicast traffic flow the path A -> C -> B, Router B will drop the traffic.
This is because RPF check fails - from B&rsquo;s point of view, the traffic source from A should go via A -> B not from C -> B.</p><p>This mechanism ensures that multicast traffic always flows along the most efficient path from the source to the receivers, preventing unnecessary traffic duplication and potential network congestion caused by routing loops.</p><h3 class="relative group">Static RP<div id=static-rp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#static-rp aria-label=Anchor>#</a></span></h3><p>In static RP configuration, we manually specify the RP address on each multicast router.</p><p>This method is simple but lacks scalability and redundancy. If the RP becomes unavailable, multicast traffic may be disrupted.</p><p>Example:</p><p>On a multicast router, configure a static RP with the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim rp-address 10.1.34.3
</span></span></code></pre></div><h3 class="relative group">Dynamic RP<div id=dynamic-rp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#dynamic-rp aria-label=Anchor>#</a></span></h3><p>Dynamic RP selection methods, such as Auto-RP and Bootstrap Router (BSR), provide scalability and redundancy by allowing multiple routers to serve as RPs. These methods automatically distribute RP information to multicast routers, improving the network&rsquo;s resilience and efficiency.</p><h4 class="relative group">Auto-RP<div id=auto-rp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#auto-rp aria-label=Anchor>#</a></span></h4><p>Auto-RP uses a Mapping Agent to collect and distribute RP information. This method requires configuration on multicast routers, RP candidates, and the Mapping Agent.</p><p>On Multicast Routers:</p><p>Enable Auto-RP listening with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim autorp listener
</span></span></code></pre></div><p>On RP Candidate:</p><p>Configure the RP candidate to announce itself with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim send-rp-announce loopback 0 scope 255
</span></span></code></pre></div><p>On Mapping Agent:</p><p>Set up the Mapping Agent to discover RP candidates with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim send-rp-discovery loopback 0 scope 255
</span></span></code></pre></div><h4 class="relative group">BSR<div id=bsr class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bsr aria-label=Anchor>#</a></span></h4><p>BSR uses a Bootstrap Router to distribute RP information. This method is more commonly used in modern networks due to its simplicity and efficiency.</p><p>On RP Candidate:</p><p>Configure the RP candidate with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim rp-candidate loopback 0
</span></span></code></pre></div><p>On BSR Candidate:</p><p>Set up the BSR candidate with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>ip pim bsr-candidate loopback 0
</span></span></code></pre></div><h2 class="relative group">BIDIR-PIM<div id=bidir-pim class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bidir-pim aria-label=Anchor>#</a></span></h2><p>Bidirectional PIM (BIDIR-PIM) is an enhancement to traditional PIM Sparse Mode, designed to improve efficiency in multicast networks.</p><ul><li>BIDIR-PIM constructs a single bidirectional shared tree rooted at the RP.</li><li>Unlike PIM-SM, which uses both shared trees and source-specific trees, BIDIR-PIM only uses shared trees, allowing traffic to flow in both directions.</li><li>To prevent loops and manage traffic direction, BIDIR-PIM introduces the concept of a Designated Forwarder (DF).</li><li>On each network segment, a DF is elected based on the best unicast routing metric to the RP, similar to OSPF&rsquo;s Designated Router (DR).</li><li>The DF is responsible for forwarding multicast traffic on its segment, ensuring aloop-free topology.</li><li>By using a single shared tree for both sources and receivers, BIDIR-PIM reduces the amount of state information that routers need to maintain.</li></ul><p>When a source starts sending multicast traffic:</p><p>Source to RP:</p><ul><li>The first-hop router receives the traffic.</li><li>When a router receives multicast traffic on a network segment, it checks whether it is the DF for that segment.</li><li>If the router is the DF for the incoming interface, it is responsible for forwarding the multicast traffic.</li><li>The DF forwards the traffic to all other interfaces on which it is also the DF (using its ip route).</li></ul><p>RP to Destination:</p><ul><li>use share tree to forward traffic to the destination</li></ul><p>Configuration:</p><p>To enable BIDIR-PIM, we just need to add <code>ip pim bidir-enable</code> on all routers in the network.</p></div></div><script>var oid="views_posts/Multicast.md",oid_likes="likes_posts/Multicast.md"</script><script type=text/javascript src=/js/page.min.b06a29d42a4ed16787978e2eee1e8c797b7698db2bc14ccee78f5c80ac566fc996190a73ad80a5e987558474b20b96fa38f7d85b405f165ff72b7b163c5ad11b.js integrity="sha512-sGop1CpO0WeHl44u7h6MeXt2mNsrwUzO549cgKxWb8mWGQpzrYCl6YdVhHSyC5b6OPfYW0BfFl/3K3sWPFrRGw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/25-setup_dmvpn/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">25 - Setup DMVPN</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2024-08-25 00:00:00 +0000 UTC">25 August 2024</time></span></span></a></span>
<span></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://hugotkk-github-io.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></footer></article></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/posts/ title=Posts>Articles</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tags/ title=Tags>Tags</a></li></ul></nav><div class="flex items-center justify-between"></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://hugotkk.github.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>