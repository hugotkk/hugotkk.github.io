<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>pxeboot &#183; Hugo's IT journal</title><meta name=title content="pxeboot &#183; Hugo's IT journal"><meta name=description content="Explore an IT enthusiast's personal journal sharing insights on DevOps, AWS, Kubernetes, Docker, and more - learn, grow, and stay updated in the tech world."><link rel=canonical href=https://hugotkk.github.com/posts/pxeboot/><link type=text/css rel=stylesheet href=/css/main.bundle.min.063a9f97d19633e479cdf057a8a0cbf6b8ddd636f69e9bbc434359ffe7fa53e07c889c4429a3c207ad89557949bdc06598a56842c1855fa7578b4db2f26304be.css integrity="sha512-Bjqfl9GWM+R5zfBXqKDL9rjd1jb2npu8Q0NZ/+f6U+B8iJxEKaPCB62JVXlJvcBlmKVoQsGFX6dXi02y8mMEvg=="><script type=text/javascript src=/js/main.min.cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e.js integrity="sha512-z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg=="></script>
<script type=text/javascript src=/js/appearance.min.f94f4c4636d9e3ec8f5ee53cdc8ffa3d01bf87cd92ac85e6797550b1e2b80dc9118d838f3eb24c55109352455e72ff082dfe560283154e5a8f87fd75107b59c4.js integrity="sha512-+U9MRjbZ4+yPXuU83I/6PQG/h82SrIXmeXVQseK4DckRjYOPPrJMVRCTUkVecv8ILf5WAoMVTlqPh/11EHtZxA=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.3ddcf04f5b0d4c32f72e726d3c12eebccd8c3c9f9daa9a13414808895de0ae1e1cdddda6849680d5bd96dbb60d0b1e0b24c29f5c83e5631e55e7e6bc02015490.js integrity="sha512-PdzwT1sNTDL3LnJtPBLuvM2MPJ+dqpoTQUgIiV3grh4c3d2mhJaA1b2W27YNCx4LJMKfXIPlYx5V5+a8AgFUkA==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="pxeboot"><meta property="og:description" content="I recently experimented with PXE boot and auto-installation for various OS in my lab setup. Here is the process and details sharing with you.
Netboot install process> Netboot install process # When the VM is started, it enters the UEFI."><meta property="og:type" content="article"><meta property="og:url" content="https://hugotkk.github.com/posts/pxeboot/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-16T23:51:11+00:00"><meta property="og:site_name" content="Hugo's IT journal"><meta name=twitter:card content="summary"><meta name=twitter:title content="pxeboot"><meta name=twitter:description content="I recently experimented with PXE boot and auto-installation for various OS in my lab setup. Here is the process and details sharing with you.
Netboot install process> Netboot install process # When the VM is started, it enters the UEFI."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"pxeboot","headline":"pxeboot","abstract":"I recently experimented with PXE boot and auto-installation for various OS in my lab setup. Here is the process and details sharing with you.\nNetboot install process\u003e Netboot install process # When the VM is started, it enters the UEFI.","inLanguage":"en","url":"https:\/\/hugotkk.github.com\/posts\/pxeboot\/","author":{"@type":"Person","name":"Hugo"},"copyrightYear":"2023","dateCreated":"2023-12-16T00:00:00\u002b00:00","datePublished":"2023-12-16T00:00:00\u002b00:00","dateModified":"2023-12-16T23:51:11\u002b00:00","keywords":["pxeboot"],"mainEntityOfPage":"true","wordCount":"2098"}]</script><meta name=author content="Hugo"><link href=https://github.com/hugotkk rel=me><link href=https://linkedin.com/in/hugotkk rel=me><script async src="https://www.googletagmanager.com/gtag/js?id=G-V270QWW7TE"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V270QWW7TE",{anonymize_ip:!1})}</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0 class="flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Hugo&rsquo;s IT journal</span>
<img src=/image.jpg width=230 height=230 class="max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Hugo's IT journal"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Hugo&rsquo;s IT journal</a></nav><div class="hidden md:flex items-center space-x-5 md:ml-12"><a href=/posts/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>Articles</a>
<a href=/tags/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>Tags</a>
<button id=search-button class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:25px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mb-1><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts><span class="inline-block align-text-bottom"></span>Articles</a></li><li class=mb-1><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags><span class="inline-block align-text-bottom"></span>Tags</a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">pxeboot</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2023-12-16 00:00:00 +0000 UTC">2023-12-16</time></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/pxeboot/")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">pxeboot</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#netboot-install-process>Netboot install process</a></li><li><a href=#workflow>Workflow</a></li><li><a href=#lessions-learnd>Lessions Learnd</a><ul><li><a href=#separating-netboot-and-auto-install-in-testing>Separating netboot and auto install in testing</a></li><li><a href=#debugging-with-serial-display>Debugging with Serial Display</a></li><li><a href=#using-cd-rom-as-a-troubleshooting-fallback>Using CD-ROM as a Troubleshooting Fallback</a></li><li><a href=#enabling-logging>Enabling Logging</a></li><li><a href=#obtain-the-auto-install-script-from-manual-installation-if-feasible>Obtain the auto-install script from manual installation (if feasible)</a></li><li><a href=#universal-boot-loader>Universal Boot loader</a></li></ul></li><li><a href=#lab-setup>Lab Setup</a><ul><li><a href=#servers>Servers</a><ul><li><a href=#pxe-server>PXE Server</a></li><li><a href=#test-vm>Test VM</a></li></ul></li><li><a href=#services>Services</a><ul><li><a href=#dnsmasq>Dnsmasq</a></li><li><a href=#tftp>TFTP</a></li><li><a href=#apache>Apache</a></li></ul></li></ul></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#netboot-install-process>Netboot install process</a></li><li><a href=#workflow>Workflow</a></li><li><a href=#lessions-learnd>Lessions Learnd</a><ul><li><a href=#separating-netboot-and-auto-install-in-testing>Separating netboot and auto install in testing</a></li><li><a href=#debugging-with-serial-display>Debugging with Serial Display</a></li><li><a href=#using-cd-rom-as-a-troubleshooting-fallback>Using CD-ROM as a Troubleshooting Fallback</a></li><li><a href=#enabling-logging>Enabling Logging</a></li><li><a href=#obtain-the-auto-install-script-from-manual-installation-if-feasible>Obtain the auto-install script from manual installation (if feasible)</a></li><li><a href=#universal-boot-loader>Universal Boot loader</a></li></ul></li><li><a href=#lab-setup>Lab Setup</a><ul><li><a href=#servers>Servers</a><ul><li><a href=#pxe-server>PXE Server</a></li><li><a href=#test-vm>Test VM</a></li></ul></li><li><a href=#services>Services</a><ul><li><a href=#dnsmasq>Dnsmasq</a></li><li><a href=#tftp>TFTP</a></li><li><a href=#apache>Apache</a></li></ul></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>I recently experimented with PXE boot and auto-installation for various OS in my lab setup. Here is the process and details sharing with you.</p><div id=netboot-install-process class=anchor>Netboot install process></div><h2 class="relative group">Netboot install process
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#netboot-install-process aria-label=Anchor>#</a></span></h2><ul><li>When the VM is started, it enters the UEFI.</li><li>The VM sends a DHCP request to the broadcast address.</li><li>The DHCP server responds to this request by leasing an IP address to the VM. Along with the IP address, the DHCP server provides the location of the boot image (<code>grubx64.efi</code> for UEFI boot).</li><li>The VM then downloads the boot image from the PXE server and start the GRUB2 bootloader.</li><li>GRUB2 loads the <code>grub.cfg</code> file, which contains the config for the boot menu.</li><li>The boot menu appears, presenting the user with different OS options to install.</li><li>Once the user selects the desired OS, the installation process begins.</li></ul><div id=workflow class=anchor>Workflow></div><h2 class="relative group">Workflow
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#workflow aria-label=Anchor>#</a></span></h2><ol><li>Configure the dnsmasq, tftp, and Apache servers.</li><li>Set up DHCP for a test VM.</li><li>Prepare the boot loader.</li><li>Customize the test VM to boot using grub2 and load the grub2.cfg file, optionally including a dummy menu entry.</li><li>Prepare the ISO, extract the kernel, initrd, repo and retrieve the boot command from the official documentation.</li><li>If feasible, conduct a manual installation using qemu with a CD-ROM to obtain the auto-installation script.</li><li>Further develop the auto-installation script within the qemu environment.</li><li>Update the auto-installation script</li><li>Update the grub2.cfg file - crafting the appropriate menu entry based on the qemu command.</li><li>Commence the netboot installation in a real environment.</li></ol><div id=lessions-learnd class=anchor>Lessions Learnd></div><h2 class="relative group">Lessions Learnd
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#lessions-learnd aria-label=Anchor>#</a></span></h2><div id=separating-netboot-and-auto-install-in-testing class=anchor>Separating netboot and auto install in testing></div><h3 class="relative group">Separating netboot and auto install in testing
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#separating-netboot-and-auto-install-in-testing aria-label=Anchor>#</a></span></h3><p>When conducting tests, it&rsquo;s advisable to separate the PXE boot and auto-installation processes.</p><p>The primary objective of PXE booting is to ensure that the VM acquires the correct IP address and that the boot loader loads correctly.</p><p>To effectively test the auto-installation, it&rsquo;s best to do so independently.</p><p>You can carry out the auto-installation testing using QEMU/KVM.</p><p>By directly initiating the VM with specific kernel, initrd, and boot options, you can bypass the PXE boot and boot loader stages, proceeding directly into the installation process.</p><p>This approach not only saves time by eliminating the need to wait for the BIOS and boot loader but also isolates any potential network issues related to PXE booting.</p><div id=debugging-with-serial-display class=anchor>Debugging with Serial Display></div><h3 class="relative group">Debugging with Serial Display
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#debugging-with-serial-display aria-label=Anchor>#</a></span></h3><p>Initially, I opted to connect a serial port to the VM for debugging purposes.</p><p>However, it&rsquo;s important to note that many installers and kernels have limited support for serial output, often resulting in a blank screen.</p><p>As a result, I transitioned to using X11 forwarding for GUI display on my local PC and stopped relying on the serial port unless it was explicitly recommended.</p><div id=using-cd-rom-as-a-troubleshooting-fallback class=anchor>Using CD-ROM as a Troubleshooting Fallback></div><h3 class="relative group">Using CD-ROM as a Troubleshooting Fallback
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-cd-rom-as-a-troubleshooting-fallback aria-label=Anchor>#</a></span></h3><p>In cases where issues arise with QEMU, attaching a CD-ROM to the VM can help identify potential misconfigurations. CD-ROM installation should be considered as a last resort.</p><p>For instance, I encountered difficulties when attempting to initiate XCP-ng installation with UEFI, even when using a CD-ROM. This may indicate possible hardware compatibility issues.</p><div id=enabling-logging class=anchor>Enabling Logging></div><h3 class="relative group">Enabling Logging
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enabling-logging aria-label=Anchor>#</a></span></h3><p>Enabling logs for DHCP, TFTP, and Apache is a crucial step for troubleshooting.</p><p>These logs provide in-depth insights into the booting and installation processes.</p><p>When examining the TFTP logs, you can monitor requests for the boot loader (<code>grubx64.efi</code>), boot menu (<code>grub.cfg</code>), and kernel/ramdisk, aiding in the identification of required config and pinpointing any misconfigurations.</p><p>Simultaneously, the Apache server&rsquo;s access logs prove invaluable for comprehending the installation process.</p><p>You can observe the progress of the installation, such as the loading of the ISO or the retrieval of packages from the server.</p><p>This level of visibility is essential for ensuring that the installation proceeds as anticipated and for diagnosing any potential irregularities.</p><div id=obtain-the-auto-install-script-from-manual-installation-if-feasible class=anchor>Obtain the auto-install script from manual installation (if feasible)></div><h3 class="relative group">Obtain the auto-install script from manual installation (if feasible)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#obtain-the-auto-install-script-from-manual-installation-if-feasible aria-label=Anchor>#</a></span></h3><p>For instance, in the case of Ubuntu:</p><p>When installation ubuntu using server installer, an auto-install file that allows you to replicate the installation process is generated and can be found at <code>/var/log/installer/autoinstall-user-data</code>.</p><p><a href=https://ubuntu.com/server/docs/install/autoinstall target=_blank>https://ubuntu.com/server/docs/install/autoinstall</a></p><p>For CentOS:</p><p>After the installation is successfully completed, all the selections made during the installation process are saved in <code>/root/anaconda-ks.cfg</code>.</p><p><a href=https://docs.centos.org/en-US/centos/install-guide/Kickstart2/#sect-kickstart-file-create target=_blank>https://docs.centos.org/en-US/centos/install-guide/Kickstart2/#sect-kickstart-file-create</a></p><div id=universal-boot-loader class=anchor>Universal Boot loader></div><h3 class="relative group">Universal Boot loader
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#universal-boot-loader aria-label=Anchor>#</a></span></h3><p>There are multiple ways to obtain the boot loader image. You can either install the required packages or copy them from an existing server.</p><p>However, it&rsquo;s important to note that different Linux distributions may compile these components differently, potentially missing necessary features and using varying config paths.</p><p>As an illustration, let&rsquo;s consider how Ubuntu and CentOS handle their Grub configurations:</p><p>In the case of Ubuntu, Grub is loaded from a subdirectory named &ldquo;grub&rdquo; within the root directory ("/grub/grub.cfg").</p><p><a href=https://ubuntu.com/server/docs/install/netboot-amd64 target=_blank>https://ubuntu.com/server/docs/install/netboot-amd64</a></p><blockquote><p>Create /srv/tftp/grub/grub.cfg that contains</p></blockquote><p>Meanwhile, CentOS loads Grub directly from the root directory ("/grub.cfg").</p><p><a href=https://docs.centos.org/en-US/centos/install-guide/pxe-server/#sect-network-boot-setup-uefi target=_blank>https://docs.centos.org/en-US/centos/install-guide/pxe-server/#sect-network-boot-setup-uefi</a></p><blockquote><p>Add a configuration file named grub.cfg to the tftpboot/ directory. A sample configuration file at /var/lib/tftpboot/grub.cfg might look like:</p></blockquote><p>Following the official guides from each distribution can sometimes be confusing and may not work seamlessly when dealing with netboot across different distributions using a single bootloader.</p><p>One valuable feature I&rsquo;ve encountered in the legacy boot loader <code>pxelinux.0</code> is its ability to load config files based on MAC addresses. It automatically searches for the MAC address and, if not found, gracefully defaults to <code>default</code>. This functionality proves exceptionally useful when booting various machines with distinct menu configs.</p><p>More information on this feature can be found here: <a href="https://wiki.syslinux.org/wiki/index.php?title=PXELINUX#config" target=_blank>PXELINUX config</a>.</p><p>Another essential feature is multiboot, which is necessary for XCP-ng installations in UEFI environments. (Yes, UEFI is ok actually, just not work on my lab setup)</p><p>So, I&rsquo;m faced with two challenges:</p><ol><li>I need to determine the config paths (grub2.cfg).</li><li>I want to incorporate custom features into the grub2 image.</li></ol><p>Regarding the first challenge, I&rsquo;ve found a simple solution by examining the TFTP server&rsquo;s access log to identify the config path. This helps me locate the necessary config files for my setup.</p><p>For the second challenge, I&rsquo;ve discovered that Debian&rsquo;s version of Grub can load configs based on MAC addresses, and I&rsquo;ve learned that <code>grub2-mkimage</code> is the tool to create custom Grub images.</p><p>However, it&rsquo;s important to note that we have to specify the required modules ourselves, and the module list can typically be obtained from the source code of the Grub package in the specific distribution.</p><p>You can check <a href=https://github.com/hugotkk/homelab-tftp/tree/main target=_blank>this page</a> to find out the commands to build the grub image.</p><div id=lab-setup class=anchor>Lab Setup></div><h2 class="relative group">Lab Setup
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#lab-setup aria-label=Anchor>#</a></span></h2><p>The Ubuntu guide located at <a href=https://ubuntu.com/server/docs/install/netboot-amd64 target=_blank>https://ubuntu.com/server/docs/install/netboot-amd64</a> has already covered 80% of the necessary steps for setting up various components, including PXE, the Apache server, and obtaining essential components such as the kernel, ramdisk, Grub2 EFI, and pxelinux.0.</p><p>Host System: Proxmox</p><p>OS to be netboot:</p><ul><li>Ubuntu 22.04</li><li>Rocky 9.2</li><li>XCP-ng 8.2</li><li>Harvester v1.2.1</li></ul><div id=servers class=anchor>Servers></div><h3 class="relative group">Servers
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#servers aria-label=Anchor>#</a></span></h3><ul><li>PXE Server: 203.0.113.182 (ubuntu22.04)</li><li>Test VM: 203.0.113.100</li></ul><p>PXE Server and Test VM are in the same subnet: 203.0.113.0/24</p><div id=pxe-server class=anchor>PXE Server></div><h4 class="relative group">PXE Server
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pxe-server aria-label=Anchor>#</a></span></h4><ul><li>Installed with dnsmasq for TFTP and DHCP services</li><li>Apache2 server for hosting installation files</li></ul><div id=test-vm class=anchor>Test VM></div><h4 class="relative group">Test VM
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#test-vm aria-label=Anchor>#</a></span></h4><ul><li>Attached with an empty disk</li><li>Boot order set to disk first, then network</li><li>Boot mode: UEFI</li></ul><div id=services class=anchor>Services></div><h3 class="relative group">Services
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#services aria-label=Anchor>#</a></span></h3><div id=dnsmasq class=anchor>Dnsmasq></div><h4 class="relative group">Dnsmasq
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#dnsmasq aria-label=Anchor>#</a></span></h4><p>Dnsmasq is primarily used for DHCP - it assigns IP addresses to servers and maps these IP addresses to the MAC addresses of the VMs.</p><p>But it also serves as the tftp server</p><p>the conf of Dnsmasq be like:</p><pre tabindex=0><code>interface=ens19,lo
bind-interfaces
enable-tftp
tftp-root=/srv/tftp

log-queries
log-dhcp
dhcp-leasefile=/var/dnsmasq/leasefile

dhcp-boot=pxelinux.0
dhcp-match=set:efi-x86_64,option:client-arch,7
dhcp-boot=tag:efi-x86_64,grubx64.efi
dhcp-range=ens19,203.0.113.2,203.0.113.254
dhcp-option=ens19,3,203.0.113.1
dhcp-host=BC:24:11:3A:C4:49,testvm,203.0.113.100
</code></pre><p>Breakdowns:</p><pre tabindex=0><code>log-queries
log-dhcp 
</code></pre><p>I enabled logging to keep track of the dhcp / tftp requests for troubleshooting.</p><pre tabindex=0><code>dhcp-boot=pxelinux.0
dhcp-match=set:efi-x86_64,option:client-arch,7
dhcp-boot=tag:efi-x86_64,grubx64.efi
</code></pre><p>This is a crucial setting. It directs the server to boot using <code>grubx64.efi</code> (GRUB2 EFI image) if it is in UEFI mode. In case of legacy mode, it uses <code>pxelinux.0</code>.</p><pre tabindex=0><code>dhcp-option=ens19,3,203.0.113.1
</code></pre><p>This option is set to inform the VM that the gateway IP is 203.0.113.1.</p><pre tabindex=0><code>dhcp-range=ens19,203.0.113.2,203.0.113.254
dhcp-host=BC:24:11:3A:C4:49,testvm,203.0.113.100
</code></pre><p>This specifies that any DHCP requests coming from <code>ens19</code> will have an IP lease range between <code>203.0.113.2</code> and <code>203.0.113.254</code>.</p><p>Furthermore, <code>dhcp-host=</code> is used to assign a specific IP (reverse 203.0.113.100) to a particular server, identified by its MAC address.</p><div id=tftp class=anchor>TFTP></div><h4 class="relative group">TFTP
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#tftp aria-label=Anchor>#</a></span></h4><p>TFTP server is used for serving the boot loader, its config (boot menu), kernel and ramdisk.</p><p>I opted for UEFI boot and chose GRUB2 as the boot loader.</p><p>The GRUB config file is located at <code>EFI/BOOT/grub.cfg</code>, and <code>grubx64.efi</code> is used as the GRUB EFI image.</p><p>For my XCP-ng installation, I had to switch to legacy boot due to some issues with UEFI.</p><p>In this scenario, <code>mboot.c32</code>, <code>menu.c32</code>, and <code>pxelinux.0</code> were utilized for the legacy boot process. The menu configuration for this is found in <code>pxelinux.cfg/default</code>.</p><p>Both the RAM disk and the kernel are extracted directly from the ISOs (<code>mount -o loop xxx.iso /mnt</code>) of the OS.</p><p>TFTP Server Folder Structure:</p><pre tabindex=0><code>/srv

└── tftp
    ├── EFI
    │ └── BOOT
    │     └── grub.cfg
    ├── grubx64.efi
    ├── harvester-1.2.1
    │ ├── initrd
    │ └── vmlinuz
    ├── mboot.c32
    ├── menu.c32
    ├── pxelinux.0
    ├── pxelinux.cfg
    │ └── default
    ├── rocky-9.3
    │ ├── initrd
    │ └── vmlinuz
    ├── ubuntu-22.04
    │ ├── initrd
    │ └── vmlinuz
    └── xcp-ng-8.3.0
        ├── install.img
        ├── vmlinuz
        └── xen
</code></pre><p>grub.cfg</p><pre tabindex=0><code>...

menuentry &#39;Ubuntu 22.04&#39; {
    linuxefi /ubuntu-22.04/vmlinuz console=tty1 root=/dev/ram0 ramdisk_size=3000000 ip=dhcp url=http://192.168.0.182/iso/ubuntu-22.04.3-live-server-amd64.iso autoinstall ds=nocloud-net\;s=http://192.168.0.182/ubuntu/cloud-init/ cloud-config-url=/dev/null
    initrdefi /ubuntu-22.04/initrd
}

menuentry &#39;Rocky 9.3&#39; {
    linuxefi /rocky-9.3/vmlinuz console=tty1 ip=dhcp inst.ks=http://192.168.0.182/rocky/ks.cfg inst.repo=http://192.168.0.182/rocky/repo
    initrdefi /rocky-9.3/initrd
}

menuentry &#39;xcp-ng 8.3.0&#39; {
    multiboot2 /xcp-ng-8.3.0/xen dom0_mem=2048M,max:2048M watchdog dom0_max_vcpus=4 com1=115200,8n1 console=com1,vga
    module2 /xcp-ng-8.3.0/vmlinuz console=hvc0 console=ttyS0 answerfile=http://192.168.0.182/xcp-ng/answerfile.xml install
    module2 /xcp-ng-8.3.0/install.img
}

menuentry &#39;harvester 1.2.1 (Create)&#39; {
    linuxefi /harvester-1.2.1/vmlinuz ip=dhcp net.ifnames=1 rd.cos.disable rd.noverifyssl console=tty1 root=live:http://192.168.0.182/harvester/rootfs.squashfs harvester.install.automatic=true harvester.install.config_url=http://192.168.0.182/harvester/config-create.yaml
    initrdefi /harvester-1.2.1/initrd
}

menuentry &#39;harvester 1.2.1 (Join)&#39; {
    linuxefi /harvester-1.2.1/vmlinuz ip=dhcp net.ifnames=1 rd.cos.disable rd.noverifyssl console=tty1 root=live:http://192.168.0.182/harvester/rootfs.squashfs harvester.install.automatic=true harvester.install.config_url=http://192.168.0.182/harvester/config-join.yaml
    initrdefi /harvester-1.2.1/initrd
}

...
</code></pre><p>There are primarily two types of boot menu config to work with:</p><ul><li><p>Grub2 EFI: This config is intended for systems that use the UEFI standard for booting, representing a modern approach to the boot process (grub2.cfg).</p></li><li><p>Legacy Boot: The legacy boot config is designed for older systems that lack UEFI support. It&rsquo;s crucial to have this config as a fallback to ensure compatibility with older hardware (pxelinux.cfg/default).</p></li></ul><p>Both config serve the same purpose, which is to boot the kernel with a ramdisk, and they share similarities in their command structures.</p><p>For specific boot config and commands for each operating system, you can refer to their respective netboot documentation:</p><ul><li><a href=https://docs.xcp-ng.org/installation/install-xcp-ng/#unattended-installation-iso-with-remote-config target=_blank>xcp-ng</a>.</li><li><a href=https://ubuntu.com/server/docs/install/netboot-amd64 target=_blank>Ubuntu</a>.</li><li><a href=https://docs.centos.org/en-US/centos/install-guide/pxe-server/#sect-network-boot-setup-uefi target=_blank>Rocky</a>, given its similarity to CentOS.</li><li><a href=https://docs.harvesterhci.io/v1.2/install/pxe-boot-install target=_blank>Harvester</a>.</li></ul><p>ChatGPT can be a valuable tool in converting these configurations from one format to another, such as from grub.cfg to pxelinux.cfg/default.</p><p>Furthermore, these commands can also be adapted for use with QEMU. This is especially useful for developing and testing auto-install config.</p><p>For instance, you can simulate the installation process in a testing environment, as I did with Harvester, before deploying it in a live setting.</p><pre tabindex=0><code>qemu-system-x86_64 \
-name harvester \
-enable-kvm \
-m 16384 \
-cpu host \
-smp 16,sockets=2 \
-hda /vms/harvester.img \
-nic user,hostfwd=tcp:127.0.0.1:1025-:22,dhcpstart=10.0.2.101 \
-bios /usr/share/ovmf/OVMF.fd \
-kernel harvester-v1.2.1-vmlinuz-amd64 \
-initrd harvester-v1.2.1-initrd-amd64 \
-append &#39;ip=dhcp net.ifnames=1 rd.cos.disable rd.noverifyssl console=ttyS0 root=live:http://192.168.0.182/harvester/harvester-v1.2.1-rootfs-amd64.squashfs harvester.install.automatic=true harvester.install.config_url=http://192.168.0.182/harvester/config-create.yaml&#39; \
-no-reboot
</code></pre><div id=apache class=anchor>Apache></div><h4 class="relative group">Apache
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#apache aria-label=Anchor>#</a></span></h4><p>Apache functions as an HTTP server responsible for delivering essential files required for OS installations.</p><p>When initiating an OS boot from the kernel, there is typically an option available to define auto-installation parameters, including:</p><ul><li>installation config (eg: keyboard, timezone, network, disk partition, post install)</li><li>installation source (eg: cdrom or repo)</li></ul><p>Config:</p><ul><li>Harvester uses <a href=https://docs.harvesterhci.io/v1.1/install/pxe-boot-install/#preparing-ipxe-boot-scripts target=_blank>yaml</a></li><li>Rocky, CentOS, and RedHat use (kickstart)[https://docs.centos.org/en-US/8-docs/advanced-install/assembly_kickstart-installation-basics/]</li><li>Ubuntu uses <a href=https://ubuntu.com/server/docs/install/autoinstall target=_blank>autoinstall</a> config, which is a module of <code>cloud-init</code></li><li>XCP-ng uses <a href=https://docs.xcp-ng.org/appendix/answerfile/ target=_blank>answerfile</a></li></ul><p>Source:</p><p><code>Harvester</code> and <code>Ubuntu</code> are ISO-based, meaning the entire ISO is loaded into RAM.</p><p>This requires the VM to have sufficient RAM to hold the entire content of the CD.</p><p><code>XCP-ng</code> and <code>Rocky</code> installations use repository, which involves extracting contents from the ISO and copying them to Apache.</p><p>When copying files from the ISO to the Apache server, it&rsquo;s crucial not to overlook hidden files (dot files). These files can be essential for a valid repo.</p><p>Apache Server Folder Structure:</p><pre tabindex=0><code>/var/www/html
.
├── harvester
│ ├── config-create.yaml
│ └── config-join.yaml
├── iso
│ ├── harvester-v1.2.1-amd64.iso
│ ├── openSUSE-Leap-15.0-NET-x86_64-Current.iso
│ ├── Rocky-9.3-x86_64-minimal.iso
│ ├── ubuntu-22.04.3-live-server-amd64.iso
│ ├── xcp-ng-8.3.0-beta1.iso
│ └── xcp-ng-8.3.0-beta1-netinstall.iso
├── README.md
├── rocky
│ ├── ks.cfg
│ └── repo
│     ├── BaseOS
│     ├── EFI
│     ├── images
│     ├── isolinux
│     ├── LICENSE
│     ├── media.repo
│     ├── minimal
│     └── rocky.img
├── ubuntu
│ └── cloud-init
│     ├── meta-data
│     └── user-data
└── xcp-ng
    ├── answerfile.xml
    ├── noresync.sh
    ├── post-install-script
    └── repo
        ├── boot
        ├── EFI
        ├── EULA
        ├── install.img
        ├── LICENSES
        ├── Packages
        ├── repodata
        └── RPM-GPG-KEY-xcpng
</code></pre></br></br></div><script>var oid="views_posts/pxeboot.md",oid_likes="likes_posts/pxeboot.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=Hugo src=/image_hu41af6bbe385ae76f287135953fab8786_14628_192x192_fill_q75_box_smart1.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Hugo</div><div class="text-sm text-neutral-700 dark:text-neutral-400">DevOps Engineer based in London</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/hugotkk target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/hugotkk target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/firewall-zone/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Understanding firewalld zone</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-12-05 00:00:00 +0000 UTC">2023-12-05</time></span></span></a></span>
<span></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://hugotkk-github-io.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></footer></article></main><footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Articles</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a></li></ul></nav><div class="flex items-center justify-between"></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.2166d3adac1679c00a75161830ab5725d3efc0e3d3f8c2453fb01d0907948436c25f0f8a7ad824322fa22f3f9c85fd4d0a1d5c856f53b862157da25a57dc3d52.js integrity="sha512-IWbTrawWecAKdRYYMKtXJdPvwOPT+MJFP7AdCQeUhDbCXw+KetgkMi+iLz+chf1NCh1chW9TuGIVfaJaV9w9Ug=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://hugotkk.github.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>