<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS SA Professional | Hugo</title><meta name=keywords content="cert,exam,aws,sa"><meta name=description content="api api gateway throttling limits aws throttling limit (region level) per account per-api per-stage (methods) per-client (usage plan) three type of endpoint edge-optimized (default) - route to nearest cloudfront regional private application discovery service for migration planning connection type application discovery agent -> install on server. support vm / physical server discovery connector -> install on vCenter (is a ova) Migration Hub import => import the details directly asg will automatically tag the instances by default cooldown will start after last instances launched if there are multiple instance scale at the moment athena performance tunning partition data compression (glue) optimise the file size (aws glue) use columnar (apache orc, parquet with spark or hive on EMR) prevent select * use limit by (guide for columnar) billing cost allocation tags - tags will show in the cost & usage report budget - create alert if cost exceed the budget setup for cost analysis enable cost allocation tags in billing allow user access the billing cost allocation tags => tags user-define => user:XXXX aws generated => aws:XXXX cost explorer => ui for search and filtering cost category => filter in cost explorer (saved filter) cost budget => billing alarm with foretasted charged + filtering + linked account; billing alert => amount already be charged billing alert include recurring fee like premium support ec2 instance-hours but exclude one off fee refund forecast cf access control cf + waf + elb, it should be cf (set custom header) > waf (validate the rule) > alb cf + s3, => cf with oai > s3 bucket policy cf + alb => cf with custom header > alb rule reason of cfn with s3 access denied errors s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access if request pays is turn on, the request must include the payer header object cannot be kms encrypted cfn can use automatic deployment to auto deploy existing stackset to new accounts in organisation cloudhsm need tcp/3389 for windows and tcp/22 for linux to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster cloudtrail best practice to migrate to org trail create org trail in central account create bucket for org (need to set bucket policy to allow member account to write to it) enable cloudtrail feature in org create org trail through cli move old trail data from member accounts to org trail bucket stop cloudtrail in member accounts and remove the old trail buckets codecommit data protection use macie => can help protecting data in s3 codedeploy need to connect to s3 and codedeploy endpoints cw cw embedded metric format => can automatrically create metric from log cw endpoints => monitoring."><meta name=author content="Hugo"><link rel=canonical href=https://hugotkk.github.io/posts/sa/><link crossorigin=anonymous href=/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://hugotkk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hugotkk.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hugotkk.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://hugotkk.github.io/apple-touch-icon.png><link rel=mask-icon href=https://hugotkk.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.108.0"><meta property="og:title" content="AWS SA Professional"><meta property="og:description" content="api api gateway throttling limits aws throttling limit (region level) per account per-api per-stage (methods) per-client (usage plan) three type of endpoint edge-optimized (default) - route to nearest cloudfront regional private application discovery service for migration planning connection type application discovery agent -> install on server. support vm / physical server discovery connector -> install on vCenter (is a ova) Migration Hub import => import the details directly asg will automatically tag the instances by default cooldown will start after last instances launched if there are multiple instance scale at the moment athena performance tunning partition data compression (glue) optimise the file size (aws glue) use columnar (apache orc, parquet with spark or hive on EMR) prevent select * use limit by (guide for columnar) billing cost allocation tags - tags will show in the cost & usage report budget - create alert if cost exceed the budget setup for cost analysis enable cost allocation tags in billing allow user access the billing cost allocation tags => tags user-define => user:XXXX aws generated => aws:XXXX cost explorer => ui for search and filtering cost category => filter in cost explorer (saved filter) cost budget => billing alarm with foretasted charged + filtering + linked account; billing alert => amount already be charged billing alert include recurring fee like premium support ec2 instance-hours but exclude one off fee refund forecast cf access control cf + waf + elb, it should be cf (set custom header) > waf (validate the rule) > alb cf + s3, => cf with oai > s3 bucket policy cf + alb => cf with custom header > alb rule reason of cfn with s3 access denied errors s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access if request pays is turn on, the request must include the payer header object cannot be kms encrypted cfn can use automatic deployment to auto deploy existing stackset to new accounts in organisation cloudhsm need tcp/3389 for windows and tcp/22 for linux to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster cloudtrail best practice to migrate to org trail create org trail in central account create bucket for org (need to set bucket policy to allow member account to write to it) enable cloudtrail feature in org create org trail through cli move old trail data from member accounts to org trail bucket stop cloudtrail in member accounts and remove the old trail buckets codecommit data protection use macie => can help protecting data in s3 codedeploy need to connect to s3 and codedeploy endpoints cw cw embedded metric format => can automatrically create metric from log cw endpoints => monitoring."><meta property="og:type" content="article"><meta property="og:url" content="https://hugotkk.github.io/posts/sa/"><meta property="og:image" content="https://hugotkk.github.io/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-06T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-06T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hugotkk.github.io/papermod-cover.png"><meta name=twitter:title content="AWS SA Professional"><meta name=twitter:description content="api api gateway throttling limits aws throttling limit (region level) per account per-api per-stage (methods) per-client (usage plan) three type of endpoint edge-optimized (default) - route to nearest cloudfront regional private application discovery service for migration planning connection type application discovery agent -> install on server. support vm / physical server discovery connector -> install on vCenter (is a ova) Migration Hub import => import the details directly asg will automatically tag the instances by default cooldown will start after last instances launched if there are multiple instance scale at the moment athena performance tunning partition data compression (glue) optimise the file size (aws glue) use columnar (apache orc, parquet with spark or hive on EMR) prevent select * use limit by (guide for columnar) billing cost allocation tags - tags will show in the cost & usage report budget - create alert if cost exceed the budget setup for cost analysis enable cost allocation tags in billing allow user access the billing cost allocation tags => tags user-define => user:XXXX aws generated => aws:XXXX cost explorer => ui for search and filtering cost category => filter in cost explorer (saved filter) cost budget => billing alarm with foretasted charged + filtering + linked account; billing alert => amount already be charged billing alert include recurring fee like premium support ec2 instance-hours but exclude one off fee refund forecast cf access control cf + waf + elb, it should be cf (set custom header) > waf (validate the rule) > alb cf + s3, => cf with oai > s3 bucket policy cf + alb => cf with custom header > alb rule reason of cfn with s3 access denied errors s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access if request pays is turn on, the request must include the payer header object cannot be kms encrypted cfn can use automatic deployment to auto deploy existing stackset to new accounts in organisation cloudhsm need tcp/3389 for windows and tcp/22 for linux to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster cloudtrail best practice to migrate to org trail create org trail in central account create bucket for org (need to set bucket policy to allow member account to write to it) enable cloudtrail feature in org create org trail through cli move old trail data from member accounts to org trail bucket stop cloudtrail in member accounts and remove the old trail buckets codecommit data protection use macie => can help protecting data in s3 codedeploy need to connect to s3 and codedeploy endpoints cw cw embedded metric format => can automatrically create metric from log cw endpoints => monitoring."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hugotkk.github.io/posts/"},{"@type":"ListItem","position":2,"name":"AWS SA Professional","item":"https://hugotkk.github.io/posts/sa/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS SA Professional","name":"AWS SA Professional","description":"api api gateway throttling limits aws throttling limit (region level) per account per-api per-stage (methods) per-client (usage plan) three type of endpoint edge-optimized (default) - route to nearest cloudfront regional private application discovery service for migration planning connection type application discovery agent -\u0026gt; install on server. support vm / physical server discovery connector -\u0026gt; install on vCenter (is a ova) Migration Hub import =\u0026gt; import the details directly asg will automatically tag the instances by default cooldown will start after last instances launched if there are multiple instance scale at the moment athena performance tunning partition data compression (glue) optimise the file size (aws glue) use columnar (apache orc, parquet with spark or hive on EMR) prevent select * use limit by (guide for columnar) billing cost allocation tags - tags will show in the cost \u0026amp; usage report budget - create alert if cost exceed the budget setup for cost analysis enable cost allocation tags in billing allow user access the billing cost allocation tags =\u0026gt; tags user-define =\u0026gt; user:XXXX aws generated =\u0026gt; aws:XXXX cost explorer =\u0026gt; ui for search and filtering cost category =\u0026gt; filter in cost explorer (saved filter) cost budget =\u0026gt; billing alarm with foretasted charged + filtering + linked account; billing alert =\u0026gt; amount already be charged billing alert include recurring fee like premium support ec2 instance-hours but exclude one off fee refund forecast cf access control cf + waf + elb, it should be cf (set custom header) \u0026gt; waf (validate the rule) \u0026gt; alb cf + s3, =\u0026gt; cf with oai \u0026gt; s3 bucket policy cf + alb =\u0026gt; cf with custom header \u0026gt; alb rule reason of cfn with s3 access denied errors s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access if request pays is turn on, the request must include the payer header object cannot be kms encrypted cfn can use automatic deployment to auto deploy existing stackset to new accounts in organisation cloudhsm need tcp/3389 for windows and tcp/22 for linux to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster cloudtrail best practice to migrate to org trail create org trail in central account create bucket for org (need to set bucket policy to allow member account to write to it) enable cloudtrail feature in org create org trail through cli move old trail data from member accounts to org trail bucket stop cloudtrail in member accounts and remove the old trail buckets codecommit data protection use macie =\u0026gt; can help protecting data in s3 codedeploy need to connect to s3 and codedeploy endpoints cw cw embedded metric format =\u0026gt; can automatrically create metric from log cw endpoints =\u0026gt; monitoring.","keywords":["cert","exam","aws","sa"],"articleBody":"api api gateway throttling limits aws throttling limit (region level) per account per-api per-stage (methods) per-client (usage plan) three type of endpoint edge-optimized (default) - route to nearest cloudfront regional private application discovery service for migration planning connection type application discovery agent -\u003e install on server. support vm / physical server discovery connector -\u003e install on vCenter (is a ova) Migration Hub import =\u003e import the details directly asg will automatically tag the instances by default cooldown will start after last instances launched if there are multiple instance scale at the moment athena performance tunning partition data compression (glue) optimise the file size (aws glue) use columnar (apache orc, parquet with spark or hive on EMR) prevent select * use limit by (guide for columnar) billing cost allocation tags - tags will show in the cost \u0026 usage report budget - create alert if cost exceed the budget setup for cost analysis enable cost allocation tags in billing allow user access the billing cost allocation tags =\u003e tags user-define =\u003e user:XXXX aws generated =\u003e aws:XXXX cost explorer =\u003e ui for search and filtering cost category =\u003e filter in cost explorer (saved filter) cost budget =\u003e billing alarm with foretasted charged + filtering + linked account; billing alert =\u003e amount already be charged billing alert include recurring fee like premium support ec2 instance-hours but exclude one off fee refund forecast cf access control cf + waf + elb, it should be cf (set custom header) \u003e waf (validate the rule) \u003e alb cf + s3, =\u003e cf with oai \u003e s3 bucket policy cf + alb =\u003e cf with custom header \u003e alb rule reason of cfn with s3 access denied errors s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access if request pays is turn on, the request must include the payer header object cannot be kms encrypted cfn can use automatic deployment to auto deploy existing stackset to new accounts in organisation cloudhsm need tcp/3389 for windows and tcp/22 for linux to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster cloudtrail best practice to migrate to org trail create org trail in central account create bucket for org (need to set bucket policy to allow member account to write to it) enable cloudtrail feature in org create org trail through cli move old trail data from member accounts to org trail bucket stop cloudtrail in member accounts and remove the old trail buckets codecommit data protection use macie =\u003e can help protecting data in s3 codedeploy need to connect to s3 and codedeploy endpoints cw cw embedded metric format =\u003e can automatrically create metric from log cw endpoints =\u003e monitoring.us-east-2.amazonaws.com monitoring.XXXX no az treats each unique combination of dimensions as a separate metric, even if the metrics have the same metric name data pipeline components pipeline definition pipeline schedule task runner swf which is specific for data engineering task runner can run on on-premise hosts task runners can be run on any compute resources (ec2 and on-premise servers) use resources in multiple regions only supported in limited region data sync use for transfer data between on-premise and aws or between aws service support cross-region (s3 \u003c=\u003e s3, efx \u003c=\u003e efx, efs \u003c=\u003e efs) sync source location destination location ddb support atomic counter local secondary index only can create at table creation eb can stop start eb environment with lambda at scheduled time doesn’t support HTTPS_PROXY ebs aws only recommend raid0 summary table for different volume types gp2 range: 100-16k iops baseline: base on volume (limited by burst credits) provision: no gp3 range: 3k-16k iops baseline: consistent 3k iops provision: 500iops/gb io2, io1 range: 100-32k iops / 32k-64 iops (only available for nitro system ) provision: io1: 50iops/gb; io2: 500iops/gb io2 block express only support with specific instance (R5b, X2idn, and X2iedn) range: 256k iops provision: 1000iops/gb instance store - temporary block-level storage (physically attach to the host so not an network drive) (support in specific instance type. it is free) the i/o performance are limited by ec2 instance type. although you can use raid0 to increase iops but still have a max for that queue length on ssd: 1/1000iops default block size is 4kb use case of each volume type gp2, gp3 =\u003e boot, dev, test io1, io2 =\u003e db st1 (hdd) =\u003e large sequential workloads like data / log processing (EMR, ETL, data warehouse) sc1 =\u003e save costs ec2 use cases of dual home separate the traffic by role (frontend, backend) ha (move the eni to other instance) security appliance reason eni is binding to subnet eni - when creating the eni, it inherits the public ipv4 address attribute from subnet efs HA - regional replication =\u003e notice that it means multi az not multi regions cross region backup create 1st lambda to backup data from efs to s3 in region a; turn on cross-region replication in s3; create 2nd lambda to restore data from s3 \u003e efs in region b data sync backup solution which does not work in cross region data pipeline =\u003e the backup instance cannot mount 2 efs in different regions efs-to-efs =\u003e same as data pipeline solution but implemented by lambda function only aws backup =\u003e does not support cross region backup dns name - file-system-id.efs.aws-region.amazonaws.com (like cw. us-east-2) efs can deliver sub or low single digit millisecond latencies with \u003e 10gbps through and 500k iops launching instance is limited by the number of vcpu running per account per region running elasticache caching strategies lazy load - set cache when select from db write through - set cache when write to db ttl - write through + lazy load but set an expire date connection endpoints node ep - read and write primary ep for write; reader ep for read (cluster mode disabled) configuration ep for read and write like node ep (cluster mode enable) automatically cache query to elasticache for rds, aurora and redshift (use proxy) support up to 500 nodes and shards elb classic load balancer only support at most one subnet per az iam set SAML session tags for access control (add attribute to idp metadata) policy to deny access on specific region - deny all except the global service in console, the instance profile are automatically created along with the iam role with the same name ArnLike is case-sensitive but support wildwards like * and ? group name limit is 128 characters temporary security credentials are valid until they expire mTurk submit a request to mTurk. outsource manual tasks like taking survey, text recognition, data migration to public opsworks setup custom recipe to config the application with other aws services information =\u003e solid example for adding redis cluster connection information to rail application org org features to enable all consolidated billing scp is one of the aws organisation feature default is allow all =\u003e can only use deny list only use allow list =\u003e have to remove FullAWSAccess (the default allow all policy) other Public Data Sets - data set for public access. more details fileb:// is supported in kms (key) ec2 user data (gzip) s3 (encryption key) govcloud comparson billing and using can be viewed in standard account only us citizen employees can administer the govcloud authentication is isolated from amazon.com network is isolated from other region migrate IBM MQ to Amazon MQ migrate ibm db2 luw to rds (mysql postgresql) iot monitor can check whether the rule has been executed rds RMAN restore isn’t supported for Amazon RDS for Oracle DB instances (RMAN is an backup and store tool for oracle db) route53 health check must respond with 2xx or 3xx. support tcp and http support DNSSEC s3 access control to object c (account c) from request user a (account a) and s3 bucket (account b) check the iam role in account a check the bucket policy in account b check the object acl in object owner event notification support object and bucket level but it will resend the notification and sometimes will delay so people use cloudwatch event instead there is a check in trusted advisor for the check open access in s3 bucket but no remediation for that. to fix the bucket permission automatically and use lambda + cloudwatch event cf cannot cache if the request is larger than 30gb. can use range request to chunk the large file into smaller object requester pays don’t support 1. anonymous request 2. SOAP request default 100, max 1000 in each account genomics data processing use case sync data to s3 with data sync use s3 for data storage use storage gateway (on-premise access) / fsx (ec2 access) s3 encryption - only support symmetric keys when downloading encrypted s3 object, have to download the encrypted object along with a cipher blob version of the data key. client send the cipher blob to kms to get the plaintext version of data key to decrypt the object reduced redundancy is one of the storage class in s3 but not recommend bylaws - may have a chance to lose the object secret manager set RotationSchedule to schedule an auto rotation (to run a custom lambda) the rds password snowball tips to increase performance batch small file multiple copy operations at one time (2 terminals 2 cp command) connect to multiple workstation (1 snowball can connect to multiple workstation) step for using snowball start the snowball setup workstation by download ova image and import to the vmware use cp command (something like aws s3api cp) to copy file to snowball can upload through gui / command line send the device back to aws. they will import your data to s3 take at least 1 weeks sso permission sets - 1 permission set has multiple iam policies =\u003e associate to user / group sso ad (identity provider) -\u003e aws sso -\u003e application (github, dropbox) / aws accounts sources of identity provider aws sso ad connector aws managed ad external ad (two way trust) server -\u003e client server = adfs create an app config app sign-in and sign-out url client = integrated website trusted idp config idP’s sign-in and sign-out url + cert user login with ad’s app endpoint =\u003e ad post data to app’s sign-in url =\u003e app receive and decrypt the data from ad and give permission to user aws iam federation =\u003e single account only storage gateway need to download ova and import the vm to create a endpoint to bridge on-premise and aws storage gateway type volume =\u003e mount as a disk (iSCSI) =\u003e s3 =\u003e ebs cached =\u003e save some frequently used data to vm stored =\u003e completely on s3 file =\u003e smb / nfs tape =\u003e tape backup software support paid support plans allow unlimited number of users to open technical support cases swf swf vs step function: use step function first. if does not fit =\u003e swf use case: processing large product catalogue using Amazon Mechanical Turk vpc 5 sg / eni for dx, need to enabled route propagation resource arn supported in dx tenancy vpc will determine the instance tenancy by default. for vpce, need to ensure the private dns option is enabled worksplace use connection aliases for cross-region workspaces redirection create connection alias share to other account associate with directories in each region setup route53 for failover setup connection string maintenance - support regular maintenance windows (eg 15:00-16:00) or manual maintenance but cannot set something like patching on tue 3:00 workspaces application manager - package manager to help installing software workspaces support Windows 10 desktop but no Windows server ","wordCount":"1935","inLanguage":"en","datePublished":"2022-04-06T00:00:00Z","dateModified":"2022-04-06T00:00:00Z","author":[{"@type":"Person","name":"Hugo"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://hugotkk.github.io/posts/sa/"},"publisher":{"@type":"Organization","name":"Hugo","logo":{"@type":"ImageObject","url":"https://hugotkk.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://hugotkk.github.io/ accesskey=h title="Hugo (Alt + H)">Hugo</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://hugotkk.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://hugotkk.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://hugotkk.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://hugotkk.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://hugotkk.github.io/posts/>Posts</a></div><h1 class=post-title>AWS SA Professional</h1><div class=post-meta>April 6, 2022&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Hugo</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#api aria-label=api>api</a></li><li><a href=#application-discovery-service aria-label="application discovery service">application discovery service</a></li><li><a href=#asg aria-label=asg>asg</a></li><li><a href=#athena aria-label=athena>athena</a></li><li><a href=#billing aria-label=billing>billing</a></li><li><a href=#cf aria-label=cf>cf</a></li><li><a href=#cfn aria-label=cfn>cfn</a></li><li><a href=#cloudhsm aria-label=cloudhsm>cloudhsm</a></li><li><a href=#cloudtrail aria-label=cloudtrail>cloudtrail</a></li><li><a href=#codecommit aria-label=codecommit>codecommit</a></li><li><a href=#codedeploy aria-label=codedeploy>codedeploy</a></li><li><a href=#cw aria-label=cw>cw</a></li><li><a href=#data-pipeline aria-label="data pipeline">data pipeline</a></li><li><a href=#data-sync aria-label="data sync">data sync</a></li><li><a href=#ddb aria-label=ddb>ddb</a></li><li><a href=#eb aria-label=eb>eb</a></li><li><a href=#ebs aria-label=ebs>ebs</a></li><li><a href=#ec2 aria-label=ec2>ec2</a></li><li><a href=#efs aria-label=efs>efs</a></li><li><a href=#elasticache aria-label=elasticache>elasticache</a></li><li><a href=#elb aria-label=elb>elb</a></li><li><a href=#iam aria-label=iam>iam</a></li><li><a href=#mturk aria-label=mTurk>mTurk</a></li><li><a href=#opsworks aria-label=opsworks>opsworks</a></li><li><a href=#org aria-label=org>org</a></li><li><a href=#other aria-label=other>other</a></li><li><a href=#rds aria-label=rds>rds</a></li><li><a href=#route53 aria-label=route53>route53</a></li><li><a href=#s3 aria-label=s3>s3</a></li><li><a href=#secret-manager aria-label="secret manager">secret manager</a></li><li><a href=#snowball aria-label=snowball>snowball</a></li><li><a href=#sso aria-label=sso>sso</a></li><li><a href=#storage-gateway aria-label="storage gateway">storage gateway</a></li><li><a href=#support aria-label=support>support</a></li><li><a href=#swf aria-label=swf>swf</a></li><li><a href=#vpc aria-label=vpc>vpc</a></li><li><a href=#worksplace aria-label=worksplace>worksplace</a></li></ul></div></details></div><div class=post-content><h1 id=api>api<a hidden class=anchor aria-hidden=true href=#api>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html#apigateway-how-throttling-limits-are-applied>api gateway throttling limits</a><ol><li>aws throttling limit (region level)</li><li>per account</li><li>per-api per-stage (methods)</li><li>per-client (usage plan)</li></ol></li><li>three type of endpoint<ol><li>edge-optimized (default) - route to nearest cloudfront</li><li>regional</li><li>private</li></ol></li></ul><h1 id=application-discovery-service>application discovery service<a hidden class=anchor aria-hidden=true href=#application-discovery-service>#</a></h1><ul><li>for migration planning</li><li>connection type<ul><li><a href=https://docs.aws.amazon.com/application-discovery/latest/userguide/discovery-agent.html>application discovery agent</a> -> install on server. support vm / physical server</li><li><a href=https://docs.aws.amazon.com/application-discovery/latest/userguide/discovery-connector.html>discovery connector</a> -> install on vCenter (is a ova)</li><li><a href=https://docs.aws.amazon.com/application-discovery/latest/userguide/discovery-import.html>Migration Hub import</a> => import the details directly</li></ul></li></ul><h1 id=asg>asg<a hidden class=anchor aria-hidden=true href=#asg>#</a></h1><ul><li>will <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/autoscaling-tagging.html#:~:text=The%20Auto%20Scaling%20group%20automatically%20adds%20a%20tag%20to%20instances%20with%20a%20key%20of%20aws%3Aautoscaling%3AgroupName%20and%20a%20value%20of%20the%20Auto%20Scaling%20group%20name.">automatically tag the instances</a> by default</li><li><a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/Cooldown.html#:~:text=With%20multiple%20instances%2C%20the%20cooldown%20period%20(either%20the%20default%20cooldown%20or%20the%20scaling%2Dspecific%20cooldown)%20takes%20effect%20starting%20when%20the%20last%20instance%20finishes%20launching%20or%20terminating.">cooldown will start after last instances launched</a> if there are multiple instance scale at the moment</li></ul><h1 id=athena>athena<a hidden class=anchor aria-hidden=true href=#athena>#</a></h1><ul><li><a href=https://aws.amazon.com/blogs/big-data/top-10-performance-tuning-tips-for-amazon-athena/>performance tunning</a><ol><li>partition data</li><li>compression (glue)</li><li>optimise the file size (aws glue)</li><li>use columnar (apache orc, parquet with spark or hive on EMR)</li><li>prevent select *</li><li>use limit by (<a href=https://blog.matthewrathbone.com/2019/11/21/guide-to-columnar-file-formats.html>guide for columnar</a>)</li></ol></li></ul><h1 id=billing>billing<a hidden class=anchor aria-hidden=true href=#billing>#</a></h1><ul><li>cost allocation tags - <a href="https://www.youtube.com/watch?v=AmvMEP_eUck">tags</a> will show in the cost & usage report</li><li><a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-budgets-budget.html>budget</a> - create alert if cost exceed the budget</li><li>setup for cost analysis<ol><li><a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/cost-alloc-tags.html>enable cost allocation tags in billing</a></li><li><a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/control-access-billing.html>allow user access the billing</a></li></ol></li><li>cost allocation tags => tags<ul><li>user-define => user:XXXX</li><li>aws generated => aws:XXXX</li></ul></li><li>cost explorer => ui for search and filtering</li><li>cost category => filter in cost explorer (saved filter)</li><li><a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/cost-alloc-tags.html>cost budget</a> => billing alarm with foretasted charged + filtering + linked account; billing alert => amount already be charged</li><li><a href="https://aws.amazon.com/blogs/aws/monitor-estimated-costs-using-amazon-cloudwatch-billing-metrics-and-alarms/#:~:text=includes%20usage%20charges%20for%20things%20like%20Amazon%20EC2%20instance%2Dhours%20and%20recurring%20fees%20for%20things%20like%20AWS%20Premium%20Support">billing alert</a> include<ul><li>recurring fee like premium support</li><li>ec2 instance-hours but exclude</li><li>one off fee</li><li>refund</li><li>forecast</li></ul></li></ul><h1 id=cf>cf<a hidden class=anchor aria-hidden=true href=#cf>#</a></h1><ul><li>access control<ul><li>cf + waf + elb, it should be <a href="https://aws.amazon.com/blogs/security/how-to-enhance-amazon-cloudfront-origin-security-with-aws-waf-and-aws-secrets-manager/#:~:text=In%20this%20blog%20post%2C%20you,it%20sends%20to%20your%20origin">cf (set custom header) > waf (validate the rule) > alb</a></li><li>cf + s3, => <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html>cf with oai > s3 bucket policy</a></li><li>cf + alb => <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/restrict-access-to-load-balancer.html>cf with custom header > alb rule</a></li></ul></li><li>reason of cfn with s3 <a href="https://aws.amazon.com/premiumsupport/knowledge-center/s3-rest-api-cloudfront-error-403/#:~:text=If%20your%20distribution%20is%20using%20a%20REST%20API%20endpoint%2C%20verify%20that%20your%20configurations%20meet%20the%20following%20requirements%20to%20avoid%20Access%20Denied%20errors%3A">access denied errors</a><ul><li>s3 block public access must turn off if no oas policy is set - because it will override the permissions that allow public read access</li><li>if request pays is turn on, the request must include the payer header</li><li>object cannot be kms encrypted</li></ul></li></ul><h1 id=cfn>cfn<a hidden class=anchor aria-hidden=true href=#cfn>#</a></h1><ul><li>can use <a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-orgs-manage-auto-deployment.html>automatic deployment</a> to auto deploy existing stackset to new accounts in organisation</li></ul><h1 id=cloudhsm>cloudhsm<a hidden class=anchor aria-hidden=true href=#cloudhsm>#</a></h1><ul><li>need <a href=https://docs.aws.amazon.com/cloudhsm/latest/userguide/configure-sg-client-instance.html>tcp/3389 for windows and tcp/22 for linux</a> to connect to ec2 to install cloudhsm client; tcp/2223-2225 to communicate with the cluster</li></ul><h1 id=cloudtrail>cloudtrail<a hidden class=anchor aria-hidden=true href=#cloudtrail>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/awscloudtrail/latest/userguide/creating-trail-organization.html#creating-an-organizational-trail-best-practice>best practice</a> to migrate to org trail<ol><li><a href=https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-an-organizational-trail-by-using-the-aws-cli.html>create org trail in central account</a><ul><li>create bucket for org (need to set bucket policy to allow member account to write to it)</li><li>enable cloudtrail feature in org</li><li>create org trail through cli</li></ul></li><li>move old trail data from member accounts to org trail bucket</li><li>stop cloudtrail in member accounts and remove the old trail buckets</li></ol></li></ul><h1 id=codecommit>codecommit<a hidden class=anchor aria-hidden=true href=#codecommit>#</a></h1><ul><li>data protection<ul><li>use <a href=https://docs.aws.amazon.com/codecommit/latest/userguide/data-protection.html>macie</a> => can help protecting data in s3</li></ul></li></ul><h1 id=codedeploy>codedeploy<a hidden class=anchor aria-hidden=true href=#codedeploy>#</a></h1><ul><li>need to connect to s3 and codedeploy endpoints</li></ul><h1 id=cw>cw<a hidden class=anchor aria-hidden=true href=#cw>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format_Specification.html>cw embedded metric format</a> => can automatrically create metric from log</li><li>cw endpoints => monitoring.us-east-2.amazonaws.com<ul><li>monitoring.XXXX</li><li>no az</li></ul></li><li>treats each unique combination of dimensions as a <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#:~:text=CloudWatch%20treats%20each%20unique%20combination%20of%20dimensions%20as%20a%20separate%20metric%2C%20even%20if%20the%20metrics%20have%20the%20same%20metric%20name">separate metric</a>, even if the metrics have the same metric name</li></ul><h1 id=data-pipeline>data pipeline<a hidden class=anchor aria-hidden=true href=#data-pipeline>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/what-is-datapipeline.html>components</a><ol><li>pipeline definition</li><li>pipeline schedule</li><li>task runner</li></ol></li><li>swf which is specific for data engineering</li><li>task runner can <a href="https://aws.amazon.com/datapipeline/faqs/#:~:text=How%20do%20I%20install%20a%20Task%20Runner%20on%20my%20on%2Dpremise%20hosts%3F">run on on-premise hosts</a></li><li>task runners can be run on <a href=https://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-how-remote-taskrunner-client.html>any compute resources</a> (ec2 and on-premise servers)</li><li><a href=https://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-manage-region.html>use resources in multiple regions</a></li><li>only supported in limited region</li></ul><h1 id=data-sync>data sync<a hidden class=anchor aria-hidden=true href=#data-sync>#</a></h1><ul><li>use for transfer data between on-premise and aws or between aws service</li><li>support cross-region (s3 &lt;=> s3, efx &lt;=> efx, efs &lt;=> efs) sync</li><li><a href=https://docs.aws.amazon.com/datasync/latest/userguide/configure-source-location.html>source location</a></li><li><a href=https://docs.aws.amazon.com/datasync/latest/userguide/create-destination-location.html>destination location</a></li></ul><h1 id=ddb>ddb<a hidden class=anchor aria-hidden=true href=#ddb>#</a></h1><ul><li>support <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html>atomic counter</a></li><li>local secondary index only can <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/LSI.html#:~:text=Local%20secondary%20indexes%20on%20a%20table%20are%20created%20when%20the%20table%20is%20created">create at table creation</a></li></ul><h1 id=eb>eb<a hidden class=anchor aria-hidden=true href=#eb>#</a></h1><ul><li>can stop start eb environment with <a href=https://aws.amazon.com/premiumsupport/knowledge-center/schedule-elastic-beanstalk-stop-restart/>lambda</a> at scheduled time</li><li>doesn&rsquo;t support HTTPS_PROXY</li></ul><h1 id=ebs>ebs<a hidden class=anchor aria-hidden=true href=#ebs>#</a></h1><ul><li>aws <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/raid-config.html#:~:text=Creating%20a-,RAID%200,-array%20allows%20you">only recommend raid0</a></li><li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#:~:text=The%20following%20is%20a-,summary,-of%20the%20use%20cases%20and%20characteristics%20of%20SSD">summary table for different volume types</a></li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#EBSVolumeTypes_gp2>gp2</a><ul><li>range: 100-16k iops</li><li>baseline: base on volume (limited by burst credits)</li><li>provision: no</li></ul></li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#gp3-ebs-volume-type>gp3</a><ul><li>range: 3k-16k iops</li><li>baseline: consistent 3k iops</li><li>provision: 500iops/gb</li></ul></li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html>io2, io1</a><ul><li>range: 100-32k iops / 32k-64 iops (only available for nitro system )</li><li>provision: io1: 50iops/gb; io2: 500iops/gb</li></ul></li><li>io2 block express<ul><li>only support with specific instance (<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#:~:text=Note-,io2%20Block%20Express%20volumes%20are%20supported%20with%20R5b%2C%20X2idn%2C%20and%20X2iedn%20instances%20only.,-io2%20Block%20Express">R5b, X2idn, and X2iedn</a>)</li><li>range: 256k iops</li><li>provision: 1000iops/gb</li></ul></li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html>instance store</a> - temporary block-level storage (physically attach to the host so not an network drive) (<a href="https://www.youtube.com/watch?v=7p7p4_4RYxY">support in specific instance type</a>. it is free)</li><li>the <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/storage-optimized-instances.html#storage-instances-diskperf>i/o performance</a> are limited by ec2 instance type. although you can use raid0 to increase iops but still have a max for that</li><li>queue length on ssd: <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/benchmark_procedures.html>1/1000iops</a></li><li>default <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_constraints.html#block_size>block size</a> is 4kb</li><li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html#:~:text=The%20following%20is%20a%20summary%20of%20performance%20and%20use%20cases%20for%20each%20volume%20type.">use case</a> of each volume type<ul><li>gp2, gp3 => boot, dev, test</li><li>io1, io2 => db</li><li>st1 (hdd) => large sequential workloads like data / log processing (EMR, ETL, data warehouse)</li><li>sc1 => save costs</li></ul></li></ul><h1 id=ec2>ec2<a hidden class=anchor aria-hidden=true href=#ec2>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/scenarios-enis.html#creating-dual-homed-instances-with-workloads-roles-on-distinct-subnets>use cases</a> of dual home<ul><li>separate the traffic by role (frontend, backend)</li><li>ha (move the eni to other instance)</li><li>security appliance reason</li></ul></li><li>eni is binding to subnet</li><li><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html>eni</a> - when creating the eni, it inherits the public ipv4 address attribute from subnet</li></ul><h1 id=efs>efs<a hidden class=anchor aria-hidden=true href=#efs>#</a></h1><ul><li>HA - <a href=https://aws.amazon.com/blogs/aws/new-replication-for-amazon-elastic-file-system-efs/>regional replication</a> => notice that it means multi az not multi regions</li><li>cross region backup<ul><li>create 1st lambda to backup data from efs to s3 in region a; turn on cross-region replication in s3; create 2nd lambda to restore data from s3 > efs in region b</li><li>data sync</li></ul></li><li>backup solution which does not work in cross region<ul><li><a href=https://docs.aws.amazon.com/efs/latest/ug/alternative-efs-backup.html#backup-steps>data pipeline</a> => the backup instance cannot mount 2 efs in different regions</li><li><a href=https://aws.amazon.com/solutions/implementations/efs-to-efs-backup-solution/>efs-to-efs</a> => same as data pipeline solution but implemented by lambda function only</li><li><a href=https://docs.aws.amazon.com/efs/latest/ug/alternative-efs-backup.html#recommended-backup-solutions>aws backup</a> => does not support cross region backup</li></ul></li><li><a href=https://docs.aws.amazon.com/efs/latest/ug/mounting-fs-mount-cmd-dns-name.html>dns name</a> - file-system-id.efs.aws-region.amazonaws.com (like cw. us-east-2)</li><li>efs can deliver sub or low single digit millisecond latencies with <a href="https://docs.aws.amazon.com/efs/latest/ug/performance.html#:~:text=Amazon%20EFS%20delivers%20more%20than%2010%20gibibytes%20per%20second%20(GiBps)%20of%20throughput%20over%20500%2C000%20IOPS%2C%20and%20sub%2Dmillisecond%20or%20low%20single%20digit%20millisecond%20latencies.">> 10gbps through and 500k iops</a></li><li>launching instance is limited by <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-on-demand-instances.html#:~:text=On%2DDemand%20Instance%20limits%20are%20managed%20in%20terms%20of%20the%20number%20of%20virtual%20central%20processing%20units%20(vCPUs)">the number of vcpu running per account per region running</a></li></ul><h1 id=elasticache>elasticache<a hidden class=anchor aria-hidden=true href=#elasticache>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/AmazonElastiCache/latest/mem-ug/Strategies.html#Strategies.WithTTL>caching strategies</a><ul><li>lazy load - set cache when select from db</li><li>write through - set cache when write to db</li><li>ttl - write through + lazy load but set an expire date</li></ul></li><li><a href=https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/Endpoints.html>connection endpoints</a><ul><li>node ep - read and write</li><li>primary ep for write; reader ep for read (cluster mode disabled)</li><li>configuration ep for read and write like node ep (cluster mode enable)</li></ul></li><li><a href=https://aws.amazon.com/blogs/database/automating-sql-caching-for-amazon-elasticache-and-amazon-rds/>automatically cache query</a> to elasticache for rds, aurora and redshift (use proxy)</li><li><a href="https://aws.amazon.com/elasticache/redis/#:~:text=It%20allows%20you%20to%20scale%20your%20Redis%20Cluster%20environment%20up%20to%20500%20nodes%20and%20500%20shards">support up to 500 nodes and shards</a></li></ul><h1 id=elb>elb<a hidden class=anchor aria-hidden=true href=#elb>#</a></h1><ul><li>classic load balancer only support <a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-create-internal-load-balancer.html>at most one subnet per az</a></li></ul><h1 id=iam>iam<a hidden class=anchor aria-hidden=true href=#iam>#</a></h1><ul><li>set <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_abac-saml.html>SAML session tags</a> for access control (add attribute to idp metadata)</li><li><a href=https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples_general.html#example-scp-deny-region>policy to deny access on specific region</a> - deny all except the global service</li><li>in console, the <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2.html>instance profile</a> are automatically created along with the iam role with the same name</li><li>ArnLike is case-sensitive but support wildwards like * and ?</li><li><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html>group name limit</a> is 128 characters</li><li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_disable-perms.html#:~:text=Temporary%20security%20credentials%20are%20valid%20until%20they%20expire">temporary security credentials</a> are valid until they expire</li></ul><h1 id=mturk>mTurk<a hidden class=anchor aria-hidden=true href=#mturk>#</a></h1><ul><li>submit a request to mTurk. outsource manual tasks like taking survey, text recognition, data migration to public</li></ul><h1 id=opsworks>opsworks<a hidden class=anchor aria-hidden=true href=#opsworks>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/opsworks/latest/userguide/other-services.html>setup custom recipe to config the application with other aws services information</a> => <a href=https://docs.aws.amazon.com/opsworks/latest/userguide/other-services-redis.html>solid example for adding redis cluster connection information to rail application</a></li></ul><h1 id=org>org<a hidden class=anchor aria-hidden=true href=#org>#</a></h1><ul><li>org features to enable<ul><li>all</li><li>consolidated billing</li></ul></li><li><a href=https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html>scp</a> is one of the aws organisation feature<ul><li>default is <a href=https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_inheritance_auth.html>allow all</a> => can only use deny list only</li><li>use allow list => have to remove FullAWSAccess (the default allow all policy)</li></ul></li></ul><h1 id=other>other<a hidden class=anchor aria-hidden=true href=#other>#</a></h1><ul><li><a href=https://aws.amazon.com/about-aws/whats-new/2008/12/03/public-data-sets-on-aws-now-available/>Public Data Sets</a> - data set for public access. <a href=https://aws.amazon.com/opendata/open-data-sponsorship-program/>more details</a></li><li><a href=https://aws.amazon.com/blogs/developer/best-practices-for-local-file-parameters/>fileb://</a> is supported in<ol><li>kms (key)</li><li>ec2 user data (gzip)</li><li>s3 (encryption key)</li></ol></li><li><a href=https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-differences.html>govcloud comparson</a><ol><li>billing and using can be viewed in standard account</li><li>only us citizen employees can administer the govcloud</li><li>authentication is isolated from amazon.com</li><li>network is isolated from other region</li></ol></li><li><a href=https://aws.amazon.com/blogs/compute/migrating-from-ibm-mq-to-amazon-mq-using-a-phased-approach/>migrate IBM MQ to Amazon MQ</a></li><li><a href=https://aws.amazon.com/blogs/database/aws-database-migration-service-and-aws-schema-conversion-tool-now-support-ibm-db2-as-a-source/>migrate ibm db2 luw to rds (mysql postgresql)</a></li><li><a href=https://docs.aws.amazon.com/iot/latest/developerguide/monitoring_overview.html>iot monitor</a> can check whether the rule has been executed</li></ul><h1 id=rds>rds<a hidden class=anchor aria-hidden=true href=#rds>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.Oracle.CommonDBATasks.RMAN.html#Appendix.Oracle.CommonDBATasks.BackupArchivedLogs>RMAN restore isn&rsquo;t supported for Amazon RDS for Oracle DB instances</a> (RMAN is an backup and store tool for oracle db)</li></ul><h1 id=route53>route53<a hidden class=anchor aria-hidden=true href=#route53>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-failover-determining-health-of-endpoints.html>health check</a> must respond with 2xx or 3xx. support tcp and http</li><li>support <a href=https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-configure-dnssec.html>DNSSEC</a></li></ul><h1 id=s3>s3<a hidden class=anchor aria-hidden=true href=#s3>#</a></h1><ul><li>access control to object c (account c) from request user a (account a) and s3 bucket (account b)<ol><li>check the <a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-auth-workflow-bucket-operation.html>iam role in account a</a></li><li>check the bucket policy in account b</li><li>check the <a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-auth-workflow-object-operation.html>object acl in object owner</a></li></ol></li><li><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/NotificationHowTo.html#:~:text=Amazon%20S3%20event%20notifications%20are%20designed%20to%20be%20delivered%20at%20least%20once.%20Typically%2C%20event%20notifications%20are%20delivered%20in%20seconds%20but%20can%20sometimes%20take%20a%20minute%20or%20longer.">event notification</a> support object and bucket level but it will resend the notification and sometimes will delay so people use cloudwatch event instead</li><li>there is a <a href=https://docs.aws.amazon.com/awssupport/latest/user/security-checks.html#amazon-s3-bucket-permissions>check</a> in trusted advisor for the check open access in s3 bucket but no remediation for that. to fix the bucket permission automatically and use <a href=https://aws.amazon.com/blogs/security/how-to-detect-and-automatically-remediate-unintended-permissions-in-amazon-s3-object-acls-with-cloudwatch-events/>lambda + cloudwatch event</a></li><li>cf cannot cache if the request is larger than 30gb. can use <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RangeGETs.html>range request</a> to chunk the large file into smaller object</li><li><a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/RequesterPaysBuckets.html>requester pays</a> don&rsquo;t support 1. anonymous request 2. SOAP request</li><li>default 100, max 1000 in each account</li><li><a href=https://docs.aws.amazon.com/whitepapers/latest/genomics-data-transfer-analytics-and-machine-learning/transferring-genomics-data-to-the-cloud-and-establishing-data-access-patterns-using-aws-datasync-and-aws-storage-gateway-for-files.html>genomics data processing use case</a><ol><li>sync data to s3 with data sync</li><li>use s3 for data storage</li><li>use storage gateway (on-premise access) / fsx (ec2 access)</li></ol></li><li>s3 encryption - <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingClientSideEncryption.html#:~:text=Amazon%20S3%20only%20supports%20symmetric%20keys%20and%20not%20asymmetric%20keys.">only support symmetric keys</a></li><li>when <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingClientSideEncryption.html#:~:text=that%20it%20uploads.-,When%20downloading%20an%20object,-%E2%80%94%20The%20client%20downloads">downloading encrypted s3 object</a>, have to download the encrypted object along with a cipher blob version of the data key. client send the cipher blob to kms to get the plaintext version of data key to decrypt the object</li><li><a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/storage-class-intro.html>reduced redundancy</a> is one of the storage class in s3 but not recommend bylaws - may have a chance to lose the object</li></ul><h1 id=secret-manager>secret manager<a hidden class=anchor aria-hidden=true href=#secret-manager>#</a></h1><ul><li>set <a href=https://aws.amazon.com/blogs/security/how-to-securely-provide-database-credentials-to-lambda-functions-by-using-aws-secrets-manager/>RotationSchedule</a> to schedule an auto rotation (to run a custom lambda) the rds password</li></ul><h1 id=snowball>snowball<a hidden class=anchor aria-hidden=true href=#snowball>#</a></h1><ul><li>tips to increase performance<ul><li><a href="https://docs.aws.amazon.com/snowball/latest/ug/performance.html#:~:text=Batch%20small%20files%20together">batch small file</a></li><li>multiple copy operations at one time (2 terminals 2 cp command)</li><li>connect to multiple workstation (1 snowball can connect to multiple workstation)</li></ul></li><li>step for using snowball<ol><li>start the snowball</li><li>setup workstation by download ova image and import to the vmware</li><li>use cp command (something like aws s3api cp) to copy file to snowball</li><li>can upload through gui / command line</li><li>send the device back to aws. they will import your data to s3</li></ol></li><li>take at least 1 weeks</li></ul><h1 id=sso>sso<a hidden class=anchor aria-hidden=true href=#sso>#</a></h1><ul><li><a href=https://docs.aws.amazon.com/singlesignon/latest/userguide/permissionsetsconcept.html>permission sets</a> - 1 permission set has multiple iam policies => associate to user / group</li><li>sso<ul><li>ad (identity provider) -> aws sso -> application (github, dropbox) / aws accounts</li><li><a href=https://docs.aws.amazon.com/singlesignon/latest/userguide/connectonpremad.html>sources of identity provider</a><ul><li>aws sso</li><li>ad connector</li><li>aws managed ad</li><li>external ad (two way trust)</li></ul></li><li>server -> client</li><li>server = adfs<ul><li>create an app</li><li>config app sign-in and sign-out url</li></ul></li><li>client = integrated website<ul><li>trusted idp</li><li>config idP&rsquo;s sign-in and sign-out url + cert</li></ul></li><li>user login with ad&rsquo;s app endpoint => ad post data to app&rsquo;s sign-in url => app receive and decrypt the data from ad and give permission to user</li><li>aws iam federation => single account only</li></ul></li></ul><h1 id=storage-gateway>storage gateway<a hidden class=anchor aria-hidden=true href=#storage-gateway>#</a></h1><ul><li>need to download ova and import the vm to create a endpoint to bridge on-premise and aws</li><li>storage gateway type<ul><li><a href=https://docs.aws.amazon.com/storagegateway/latest/userguide/StorageGatewayConcepts.html#volume-gateway-concepts>volume</a> => mount as a disk (iSCSI) => s3 => ebs<ul><li>cached => save some frequently used data to vm</li><li>stored => completely on s3</li></ul></li><li>file => smb / nfs</li><li>tape => <a href="https://aws.amazon.com/storagegateway/features/#:~:text=Tape%20Gateway%20presents%20an%20iSCSI,your%20tape%2Dbased%20backup%20workflows.">tape backup software</a></li></ul></li></ul><h1 id=support>support<a hidden class=anchor aria-hidden=true href=#support>#</a></h1><ul><li><a href="https://aws.amazon.com/premiumsupport/faqs/#:~:text=How%20many%20users%20can%20open%20technical%20support%20cases%3F">paid support plans</a> allow unlimited number of users to open technical support cases</li></ul><h1 id=swf>swf<a hidden class=anchor aria-hidden=true href=#swf>#</a></h1><ul><li><a href="https://aws.amazon.com/swf/faqs/#:~:text=When%20should%20I%20use%20Amazon%20SWF%20vs.%20AWS%20Step%20Functions%3F">swf vs step function</a>: use step function first. if does not fit => swf</li><li>use case: <a href="https://aws.amazon.com/swf/faqs/#:~:text=the%20failed%20chunks.-,Use%20case%20%232,-%3A%20Processing%20large%20product">processing large product catalogue using Amazon Mechanical Turk</a></li></ul><h1 id=vpc>vpc<a hidden class=anchor aria-hidden=true href=#vpc>#</a></h1><ul><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/amazon-vpc-limits.html#:~:text=cannot%20exceed%201%2C000.-,Security%20groups%20per%20network%20interface,-5">5 sg / eni</a></li><li>for dx, need to <a href="https://aws.amazon.com/premiumsupport/knowledge-center/routing-dx-private-virtual-interface/#:~:text=Verify%20that%20you%27ve%20enabled%20route%20propagation%20to%20your%20subnet%20route%20tables">enabled route propagation</a></li><li><a href="https://docs.aws.amazon.com/directconnect/latest/UserGuide/security_iam_service-with-iam.html#:~:text=Direct%20connect%20resource%20ARNs">resource arn</a> supported in dx</li><li><a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/vpc.html#:~:text=Elastic%20Beanstalk%20doesn%27t%20support%20proxy%20settings%20like%20HTTPS_PROXY%20for%20configuring%20a%20web%20proxy">tenancy vpc</a> will determine the instance tenancy by default.</li><li>for vpce, need to ensure the <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html>private dns option</a> is enabled</li></ul><h1 id=worksplace>worksplace<a hidden class=anchor aria-hidden=true href=#worksplace>#</a></h1><ul><li>use <a href=https://docs.aws.amazon.com/workspaces/latest/adminguide/cross-region-redirection.html>connection aliases</a> for cross-region workspaces redirection<ul><li>create connection alias</li><li>share to other account</li><li>associate with directories in each region</li><li>setup route53 for failover</li><li>setup connection string</li></ul></li><li><a href=https://docs.aws.amazon.com/workspaces/latest/adminguide/workspace-maintenance.html#admin-maintenance>maintenance</a> - support regular maintenance windows (eg 15:00-16:00) or manual maintenance but cannot set something like patching on tue 3:00</li><li><a href=https://docs.aws.amazon.com/wam/latest/adminguide/what_is.html>workspaces application manager</a> - package manager to help installing software</li><li>workspaces support <a href="https://aws.amazon.com/workspaces/faqs/#:~:text=2%20LTS%2C%20or-,Windows%2010%20desktop,-experiences.%20You%20can">Windows 10 desktop</a> but no Windows server</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://hugotkk.github.io/tags/cert/>cert</a></li><li><a href=https://hugotkk.github.io/tags/exam/>exam</a></li><li><a href=https://hugotkk.github.io/tags/aws/>aws</a></li><li><a href=https://hugotkk.github.io/tags/sa/>sa</a></li></ul><nav class=paginav><a class=prev href=https://hugotkk.github.io/posts/hyperledger-fabric/><span class=title>« Prev Page</span><br><span>Hyperledger fabric</span></a>
<a class=next href=https://hugotkk.github.io/posts/devops/><span class=title>Next Page »</span><br><span>AWS Certified DevOps Engineer - Professional</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on twitter" href="https://twitter.com/intent/tweet/?text=AWS%20SA%20Professional&url=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f&hashtags=cert%2cexam%2caws%2csa"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f&title=AWS%20SA%20Professional&summary=AWS%20SA%20Professional&source=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f&title=AWS%20SA%20Professional"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on whatsapp" href="https://api.whatsapp.com/send?text=AWS%20SA%20Professional%20-%20https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS SA Professional on telegram" href="https://telegram.me/share/url?text=AWS%20SA%20Professional&url=https%3a%2f%2fhugotkk.github.io%2fposts%2fsa%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://hugotkk.github.io/>Hugo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>